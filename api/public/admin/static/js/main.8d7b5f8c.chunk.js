(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{416:function(e,t,a){e.exports=a(738)},421:function(e,t,a){},738:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(44),i=a.n(c),s=(a(421),a(760)),u=a(749),l=a(750),d=a(761),m=a(762),f=a(219),E=a(383),h=a(153),p=a(758),w=a(757),g=a(759),v=a(260),b=a.n(v),k=a(339),y=a(425),j=a(58),P=a(13),S=(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a.fetchJson,a=function(e){var t=e.pagination,a=t.page,n=t.perPage,r=e.sort,o=r.field,c=r.order;return o&&(e.filter.$sort=("DESC"===c?"-":"")+o),null!=e.filter.q&&(e.filter.$term=e.filter.q,delete e.filter.q),Object.assign(y.a.flattenObject(e.filter),{$limit:n,$page:a},o?{$sort:("DESC"===c?"-":"")+("id"===o?"_id":o)}:{})},n=function(e){var t=Object.assign({},e.data);return delete t.id,delete t.createdAt,delete t.updatedAt,delete t.deletedAt,delete t.isDeleted,JSON.stringify(t)};return function(r,o,c){if(r===P.i)return Promise.all(c.ids.map(function(a){return t("".concat(e,"/").concat(o,"/").concat(a),{method:"PATCH",body:JSON.stringify(c.data)})})).then(function(e){return{data:e.map(function(e){return e.json})}});if(r===P.c)return Promise.all(c.ids.map(function(a){return t("".concat(e,"/").concat(o,"/").concat(a),{method:"DELETE"})})).then(function(e){return{data:e.map(function(e){return e.json})}});var i=function(t,r,o){var c="",i={};switch(t){case P.d:var s=a(o);c="".concat(e,"/").concat(r,"?").concat(Object(j.stringify)(s));break;case P.g:c="".concat(e,"/").concat(r,"/").concat(o.id);break;case P.f:var u=a(o);u[o.target]=o.id,c="".concat(e,"/").concat(r,"?").concat(Object(j.stringify)(u));break;case P.h:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="PUT",i.body=n(o);break;case P.a:c="".concat(e,"/").concat(r),i.method="POST",i.body=n(o);break;case P.b:c="".concat(e,"/").concat(r,"/").concat(o.id),i.method="DELETE";break;case P.e:c="".concat(e,"/").concat(r,"?").concat(o.ids.map(function(e){return Object(j.stringify)({_id:e})}).join("&"));break;default:throw new Error("Unsupported fetch action type ".concat(t))}return{url:c,options:i}}(r,o,c),s=i.url,u=i.options;return t(s,u).then(function(e){return function(e,t,a,n){console.log(t,a,n);var r=e.json;switch(t){case P.d:case P.e:case P.f:return{data:r.docs.map(function(e){return(e.id=e._id)&&delete e._id&&e}),total:r.items.total};case P.a:return n.data.id=n.data._id,delete n.data._id,{data:n.data};case P.b:return{data:n};default:return r?(r.id=r._id,delete r._id,{data:r}):{data:{}}}}(e,r,o,c)})}}("/api",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var a=localStorage.getItem("token");return t.headers.set("authorization","".concat(a)),y.a.fetchJson(e,t)}),function(){var e=Object(k.a)(b.a.mark(function e(t,a,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,a,r),e.abrupt("return",n(t,a,r));case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}()),O=a(187),_=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/api",T=function(e,t){if(e===O.d){var a=t.username,n=t.password,r=new Request(_+"/login",{method:"POST",body:JSON.stringify({username:a,password:n}),headers:new Headers({"Content-Type":"application/json"})});return fetch(r).then(function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()}).then(function(e){var t=e.token;localStorage.setItem("token",t)})}if(e===O.e)return localStorage.removeItem("token"),Promise.resolve();if(e===O.b){var o=t.status;return 401===o||403===o?(localStorage.removeItem("token"),Promise.reject()):Promise.resolve()}return e===O.a?(console.log("auth check",localStorage.getItem("token")),localStorage.getItem("token")?Promise.resolve():Promise.reject()):Promise.reject("Unknown method")},I=o.a.createElement(s.a,null,o.a.createElement(u.a,{source:"musician"}),o.a.createElement(u.a,{source:"city"}),o.a.createElement(u.a,{source:"year"}),o.a.createElement(l.a,{source:"note"})),J=function(e){return o.a.createElement(d.a,e,I)},C=function(e){return o.a.createElement(m.a,e,I)},D=function(e){return o.a.createElement(f.b,e,o.a.createElement(E.a,{rowClick:"edit"},o.a.createElement(h.a,{source:"musician"}),o.a.createElement(h.a,{source:"city"}),o.a.createElement(h.a,{source:"year"}),o.a.createElement(h.a,{source:"user_id"}),o.a.createElement(h.a,{source:"isDeleted"})))},$=o.a.createElement(s.a,null,o.a.createElement(u.a,{source:"username"}),o.a.createElement(u.a,{source:"filter"})),A=function(e){return o.a.createElement(d.a,e,$)},q=function(e){return o.a.createElement(m.a,e,$)},x=function(e){return o.a.createElement(f.b,e,o.a.createElement(E.a,{rowClick:"edit"},o.a.createElement(h.a,{source:"username"}),o.a.createElement(h.a,{source:"filter"})))},H=o.a.createElement(s.a,null,o.a.createElement(u.a,{source:"key"}),o.a.createElement(l.a,{source:"content_en"}),o.a.createElement(l.a,{source:"content_de"})),N=function(e){return o.a.createElement(d.a,e,H)},U=function(e){return o.a.createElement(m.a,e,H)},B=function(){return o.a.createElement(p.a,{dataProvider:S,authProvider:T},o.a.createElement(w.a,{name:"entry",list:D,edit:J,create:C}),o.a.createElement(w.a,{name:"filter",list:x,edit:A,create:q}),o.a.createElement(w.a,{name:"translation",list:g.a,edit:N,create:U}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[416,1,2]]]);
//# sourceMappingURL=main.8d7b5f8c.chunk.js.map