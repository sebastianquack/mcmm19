{"version":3,"sources":["helpers/index.js","components/InfoBar.js","components/Menu.js","components/MapComponent.js","components/ListPage.js","components/LineGraph.js","components/TopMusiciansList.js","components/HomePage.js","components/EditPage.js","components/ScanPage.js","components/StaticPage.js","components/Circles.js","components/BaseContainer.js","App.js","serviceWorker.js","index.js"],"names":["apiUrl","yearsRange","start","end","Date","getFullYear","isLargeScreen","width","height","t","translations","key","locale","i","length","content","capitalize","s","replace","a","toUpperCase","makeMarkerSize","amount","size","InfoBar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","react_default","createElement","UserFilterInfo","menuOpen","children","ExitButton","src","onClick","onClose","Component","styled","div","_templateObject","img","_templateObject2","require","LocaleToggle","localeOptions","map","l","LocaleOption","active","setLocale","LocaleContainer","ul","Menu_templateObject","li","Menu_templateObject2","Menu","_this2","_this3","title","render","titleKey","MenuShadow","close","MenuContainer","components_InfoBar","ContentContainer","MenuContent","MenuButton","reset","navigate","projectionMode","Menu_LocaleToggle","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","InfoWindow","nextEntry","entryIndex","entries","setState","bind","assertThisInitialized","e","index","Entry","CloseButton","PageNum","Bold","city","year","MusicianLink","setMusicianFilter","musician","Note","note","Link","setUserFilter","user_id","NextLink","largeScreen","stopPropagation","InfoWindowContainer","span","MapComponent_templateObject","MapComponent_templateObject2","MapComponent_templateObject3","MapComponent_templateObject4","p","MapComponent_templateObject5","MapComponent_templateObject6","MapComponent_templateObject7","_templateObject8","_templateObject9","mapStyles","google","window","MarkerClusterer","MapComponent","mapContainerRef","React","createRef","infoWindowRef","markers","lines","fetchData","drawMap","_this4","params","musicianFilter","userFilter","userIds","JSON","stringify","yearFilter","axios","get","then","response","console","log","data","catch","maps","Map","current","zoom","center","lat","lng","streetViewControl","fullscreenControl","mapTypeControl","maxZoom","zoomControl","styles","backgroundColor","prevProps","markerCluster","clearMarkers","forEach","m","setMap","_this5","filterMode","icon","url","scaledSize","origin","x","y","anchor","iconResized","scaled","objectSpread","labelOrigin","Point","latlngbounds","LatLngBounds","keys","k","firstEntry","duplicateLocation","index2","cityLocation","position","concat","setIcon","musicians","join","marker","Marker","label","color","fontSize","fontFamily","text","undefined","addListener","setInfoWindow","push","extend","fitBounds","listener","event","removeListener","filterOn","gridSize","minimumClusterSize","textColor","textSize","paths","location","sort","b","locationPath","Polyline","path","strokeColor","strokeOpacity","strokeWeight","_this6","MapContainer","ref","InfoWindowPlacer","showInfoWindow","MapComponent_InfoWindow","_templateObject10","visible","_templateObject11","ListPage","hash","mcmmId","docs","ListItem","EditLink","editEntry","Container","List","NewEntryButton","SecretLink","href","ShowMyEntriesButton","ListPage_templateObject","ListPage_templateObject2","ListPage_templateObject3","ListPage_templateObject4","ListPage_templateObject5","ListPage_templateObject6","ListPage_templateObject7","ListPage_templateObject8","LineGraph","className","style","transform","alt","YearButton","setYearFilter","prependAmount","unshift","apply","toConsumableArray","Array","from","appendAmount","startYear","listEntries","d","renderYear","Ol","PureComponent","LineGraph_templateObject","ol","LineGraph_templateObject2","TopMusiciansList","percent","name","count","TopMusiciansList_Container","TopMusiciansList_templateObject","TopMusiciansList_templateObject2","HomePage","showFilterBar","HomePage_Container","components_MapComponent","components_TopMusiciansList","LineGraph_LineGraph","HomePage_templateObject","EditPage","handleSubmit","processing","_id","put","parseInt","changed","error","post","handleDelete","confirm","delete","back","handleInputChange","_this$setState","target","value","isNaN","defineProperty","fixYear","yearMax","yearMin","entry","cities","EditPage_Container","Form","Label","maxlength","onChange","Autocomplete_default","items","getItemValue","item","shouldItemRender","toLowerCase","indexOf","renderItem","highlighted","onSelect","val","wrapperStyle","display","menuStyle","inputProps","autocompleteInputStyle","c","opacity","autoComplete","maxLength","type","onBlur","Button","EditPage_templateObject","EditPage_templateObject2","borderRadius","boxShadow","background","padding","overflow","maxHeight","form","EditPage_templateObject3","EditPage_templateObject4","QRCode","ScanPage","handleScan","result","substring","handleError","err","pollInterval","setInterval","pollFilter","clearInterval","ScanPage_Container","Qode","Scanner","lib_default","delay","onError","onScan","ScanPage_templateObject","ScanPage_templateObject2","ScanPage_templateObject3","StaticPage","StaticContainer","dangerouslySetInnerHTML","__html","pageKey","StaticPage_templateObject","Circles","circles","cx","cy","r","stroke","strokeWidth","fill","uuidv1","BaseContainer","onResize","toggleMenu","currentPage","page","arguments","navStack","currentEntry","pathName","pathname","projectionId","history","pushState","document","previousPage","pop","examples","handleFilterClose","filter","id","ids","filterId","projection_id","URLSearchParams","queryParams","search","localStorage","getItem","substr","setItem","disableBodyScroll","querySelector","pages","home","components_HomePage","list","components_ListPage","edit","components_EditPage","scan","components_ScanPage","components_StaticPage","mainContent","GlobalStyles","esm","handleWidth","handleHeight","components_Menu","MainContent","components_Circles","MenuBar","BaseContainer_MenuButton","MenuText","AddButton","BaseContainer_templateObject","BaseContainer_templateObject2","BaseContainer_templateObject3","BaseContainer_templateObject4","BaseContainer_templateObject5","createGlobalStyle","BaseContainer_templateObject6","App","components_BaseContainer","Boolean","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"wpDAAaA,EAAS,OAETC,EAAa,CACxBC,MAAO,KACPC,KAAK,IAAIC,MAAOC,eAGLC,EAAgB,SAASC,EAAOC,GAC3C,OAAOD,EAAQ,KAAOC,EAAS,KAG1B,SAASC,EAAEC,EAAcC,EAAKC,GACnC,IAAI,IAAIC,EAAI,EAAGA,EAAIH,EAAaI,OAAQD,IACtC,GAAGH,EAAaG,GAAGF,KAAOA,EAAK,CAC7B,IAAII,EAAUL,EAAaG,GAAG,WAAaD,GAC3C,OAAOG,GAAoB,IAAKJ,EAAM,IAG1C,MAAO,IAAKA,EAAM,IAGb,SAASK,EAAWC,GACzB,OAAIA,EAAEC,QACGD,EAAEC,QAAQ,cAAe,SAASC,GAAK,OAAOA,EAAEC,gBADnC,GAIjB,SAASC,EAAeC,GAE7B,IAAIC,EAAgB,GAATD,EAGX,OAFIC,EAAO,IAAGA,EAAO,GACjBA,EAAO,IAAGA,EAAO,GACdA,oeCNMC,cAlBb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,GAFIP,wEAQjB,OACEQ,EAAAf,EAAAgB,cAACC,EAAD,CAAgBC,SAAUR,KAAKJ,MAAMY,UACjCR,KAAKJ,MAAMa,SAEbJ,EAAAf,EAAAgB,cAACI,EAAD,CAAYC,IAAI,oBAAoBC,QAASZ,KAAKJ,MAAMiB,kBAb1CC,aAqBhBP,EAAiBQ,IAAOC,IAAVC,IACE,SAAArB,GAAK,OAAMA,EAAMY,SAAqB,OAAV,SACpC,SAAAZ,GAAK,OAAMA,EAAMY,SAAwB,WAAb,YAKvB,SAAAZ,GAAK,OAAMA,EAAMY,SAA8B,eAAnB,mBAMzCE,EAAaK,IAAOG,IAAVC,83CClCDC,EAAQ,IAAvB,IAEMC,mLACM,IAAAxB,EAAAG,KACFsB,EAAgB,CAAC,KAAM,MAAMC,IAAI,SAACC,GAAD,OACrCnB,EAAAf,EAAAgB,cAACmB,EAAD,CAAc3C,IAAK0C,EAAGE,OAAQF,GAAK3B,EAAKD,MAAMb,OAAQ6B,QAAS,kBAAIf,EAAKD,MAAM+B,UAAUH,KAAInB,EAAAf,EAAAgB,cAAA,YAAOkB,MAErG,OACEnB,EAAAf,EAAAgB,cAAA,WACED,EAAAf,EAAAgB,cAACsB,EAAD,KACGN,WARgBR,aAerBc,EAAkBb,IAAOc,GAAVC,KAMfL,EAAeV,IAAOgB,GAAVC,IAMC,SAAApC,GAAK,OAAEA,EAAM8B,OAAS,aAAe,mBAGpC,SAAA9B,GAAK,OAAEA,EAAM8B,OAAS,UAAY,YAwDvCO,cAjDb,SAAAA,EAAYrC,GAAO,IAAAsC,EAAA,OAAApC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiC,IACjBC,EAAApC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmC,GAAA9B,KAAAH,KAAMJ,KACDQ,MAAQ,GAFI8B,wEAMV,IAAAC,EAAAnC,KAEDoC,EAAQpC,KAAKJ,MAAMyC,QAAUrC,KAAKJ,MAAMyC,OAAOzC,MAAM0C,SACvD1D,EAAEoB,KAAKJ,MAAMf,aAAcmB,KAAKJ,MAAMyC,OAAOzC,MAAM0C,SAAUtC,KAAKJ,MAAMb,QACxEH,EAAEoB,KAAKJ,MAAMf,aAAc,OAAQmB,KAAKJ,MAAMb,QAElD,MACE,CAACsB,EAAAf,EAAAgB,cAACiC,EAAD,CAAY3B,QAASZ,KAAKJ,MAAM4C,MAAOhC,SAAUR,KAAKJ,MAAMY,WAC7DH,EAAAf,EAAAgB,cAACmC,EAAD,CAAejC,SAAUR,KAAKJ,MAAMY,UAElCH,EAAAf,EAAAgB,cAACoC,EAAD,CAAS7B,QAASb,KAAKJ,MAAM4C,MAAOhC,SAAUR,KAAKJ,MAAMY,UACrD4B,GAGFpC,KAAKJ,MAAMyC,OAEThC,EAAAf,EAAAgB,cAACqC,EAAD,KACG3C,KAAKJ,MAAMyC,QAGdhC,EAAAf,EAAAgB,cAACqC,EAAD,KACEtC,EAAAf,EAAAgB,cAACsC,EAAD,KACEvC,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAASZ,KAAKJ,MAAMkD,OAAQlE,EAAEoB,KAAKJ,MAAMf,aAAc,OAAQmB,KAAKJ,MAAMb,SACtFsB,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,OAAQ,cAAcnE,EAAEoB,KAAKJ,MAAMf,aAAc,WAAYmB,KAAKJ,MAAMb,SACrHsB,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,OAAQ,WAAWnE,EAAEoB,KAAKJ,MAAMf,aAAc,QAASmB,KAAKJ,MAAMb,UAC7GiB,KAAKJ,MAAMoD,gBAAkB3C,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,UAAUnE,EAAEoB,KAAKJ,MAAMf,aAAc,aAAcmB,KAAKJ,MAAMb,UACxIiB,KAAKJ,MAAMoD,gBAAkB3C,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,UAAUnE,EAAEoB,KAAKJ,MAAMf,aAAc,UAAWmB,KAAKJ,MAAMb,SACvIsB,EAAAf,EAAAgB,cAACuC,EAAD,CAAYjC,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,OAAQ,aAAanE,EAAEoB,KAAKJ,MAAMf,aAAc,UAAWmB,KAAKJ,MAAMb,SAEnHsB,EAAAf,EAAAgB,cAAC2C,EAAD,CACElE,OAAQiB,KAAKJ,MAAMb,OACnB4C,UAAW3B,KAAKJ,MAAM+B,UACtB9C,aAAcmB,KAAKJ,MAAMf,0BAvCxBiC,aAoDb+B,EAAa9B,IAAOgB,GAAVmB,KAKVT,EAAgB1B,IAAOC,IAAVmC,IAMF,SAAAvD,GAAK,OAAKA,EAAMY,SAAW,WAAa,WAYnD+B,EAAaxB,IAAOC,IAAVoC,IAOF,SAAAxD,GAAK,OAAKA,EAAMY,SAAW,QAAU,SAG7CmC,EAAmB5B,IAAOC,IAAVqC,KAMhBT,EAAc7B,IAAOc,GAAVyB,w4DC9HXC,eACJ,SAAAA,EAAY3D,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAuD,IACjB1D,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAyD,GAAApD,KAAAH,KAAMJ,KAQR4D,UAAY,WACP3D,EAAKO,MAAMqD,WAAa5D,EAAKD,MAAM8D,QAAQzE,OAAS,EACrDY,EAAK8D,SAAS,CAACF,WAAY5D,EAAKO,MAAMqD,WAAa,IAEnD5D,EAAK8D,SAAS,CAACF,WAAY,KAX3B5D,EAAKO,MAAQ,CACXqD,WAAY,GAGhB5D,EAAK2D,UAAY3D,EAAK2D,UAAUI,KAAf9D,OAAA+D,EAAA,EAAA/D,CAAAD,IANAA,wEAiBV,IAAAqC,EAAAlC,KAEH0D,EAAU1D,KAAKJ,MAAM8D,QAAQnC,IAAI,SAACuC,EAAGC,GAAJ,OACnC1D,EAAAf,EAAAgB,cAAC0D,GAAD,KAEE3D,EAAAf,EAAAgB,cAAC2D,GAAD,CAAarD,QAASsB,EAAKtC,MAAM4C,MAAO7B,IAAI,2BAC5CN,EAAAf,EAAAgB,cAAC4D,GAAD,KAAS7D,EAAAf,EAAAgB,cAAC6D,GAAD,KAAOhF,EAAW2E,EAAEM,OAA7B,IAA4ClC,EAAK9B,MAAMqD,WAAa,EAApE,IAAwEvB,EAAKtC,MAAM8D,QAAQzE,QAC3FoB,EAAAf,EAAAgB,cAAA,SACAD,EAAAf,EAAAgB,cAAC6D,GAAD,KAAOL,EAAEO,MADT,IACsBhE,EAAAf,EAAAgB,cAACgE,GAAD,CAAc1D,QAAS,WAAKsB,EAAKtC,MAAM2E,kBAAkBT,EAAEU,YAA3D,QACbrF,EAAW2E,EAAEU,YAEtBnE,EAAAf,EAAAgB,cAACmE,GAAD,KACCX,EAAEY,KAAO,IAAIZ,EAAEY,KAAK,IAAM9F,EAAEsD,EAAKtC,MAAMf,aAAc,aAAcqD,EAAKtC,MAAMb,SAE/EsB,EAAAf,EAAAgB,cAACqE,GAAD,CAAM/D,QAAS,WAAKsB,EAAKtC,MAAMgF,cAAc,CAACd,EAAEe,YAAajG,EAAEsD,EAAKtC,MAAMf,aAAc,UAAWqD,EAAKtC,MAAMb,SAC7GmD,EAAKtC,MAAM8D,QAAQzE,OAAS,GAC3BoB,EAAAf,EAAAgB,cAACwE,GAAD,CAAUC,YAAa7C,EAAKtC,MAAMmF,YAAanE,QAAS,SAACkD,GAAKA,EAAEkB,kBAAmB9C,EAAKsB,cAAgB5E,EAAEsD,EAAKtC,MAAMf,aAAc,aAAcqD,EAAKtC,MAAMb,YAKlK,OACEsB,EAAAf,EAAAgB,cAAC2E,GAAD,CAAqBF,YAAa/E,KAAKJ,MAAMmF,aAAcrB,EAAQ1D,KAAKI,MAAMqD,oBAxC3D3C,aA6CnBqD,GAAOpD,IAAOmE,KAAVC,MAIJF,GAAsBlE,IAAOC,IAAVoE,KAMd,SAAAxF,GAAK,OAAIA,EAAMmF,YAAc,MAAQ,SAY1Cd,GAAclD,IAAOG,IAAVmE,MAWXrB,GAAQjD,IAAOC,IAAVsE,MAGLpB,GAAUnD,IAAOwE,EAAVC,MAIPf,GAAO1D,IAAOC,IAAVyE,MAOJd,GAAO5D,IAAOmE,KAAVQ,MASJZ,GAAW/D,IAAOmE,KAAVS,IAEK,SAAA/F,GAAK,OAAIA,EAAMmF,YAAc,OAAS,SAUnDT,GAAevD,IAAOmE,KAAVU,KASZC,GAAYzE,EAAQ,IACpB0E,GAASC,OAAOD,OAChBE,GAAkBD,OAAOC,gBAiPhBC,eA7Ob,SAAAA,EAAYrG,GAAO,IAAAuC,EAAA,OAAArC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiG,IACjB9D,EAAArC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmG,GAAA9F,KAAAH,KAAMJ,KACDsG,gBAAkBC,IAAMC,YAC7BjE,EAAKkE,cAAgBF,IAAMC,YAC3BjE,EAAKmE,QAAU,GACfnE,EAAKoE,MAAQ,GACbpE,EAAKqE,UAAYrE,EAAKqE,UAAU5C,KAAf9D,OAAA+D,EAAA,EAAA/D,CAAAqC,IACjBA,EAAKsE,QAAUtE,EAAKsE,QAAQ7C,KAAb9D,OAAA+D,EAAA,EAAA/D,CAAAqC,IAPEA,2EAUP,IAAAuE,EAAA1G,KACN2G,EAAS,GAEV3G,KAAKJ,MAAMgH,iBACZD,EAAOnC,SAAWxE,KAAKJ,MAAMgH,gBAE5B5G,KAAKJ,MAAMiH,YAAc7G,KAAKJ,MAAMiH,WAAW5H,OAAS,IACzD0H,EAAOG,QAAUC,KAAKC,UAAUhH,KAAKJ,MAAMiH,aAE1C7G,KAAKJ,MAAMqH,aACZN,EAAOtC,KAAOrE,KAAKJ,MAAMqH,YAG3BC,IAAMC,IAAIhJ,EAAS,gBAAiB,CAACwI,WAClCS,KAAK,SAACC,GACLC,QAAQC,IAAIF,GACZX,EAAK/C,SAAS,CAAED,QAAS2D,EAASG,MAAOd,EAAKD,WAE/CgB,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,iDAKhB9D,KAAKwG,YAELxG,KAAKuB,IAAM,IAAIuE,GAAO4B,KAAKC,IAAI3H,KAAKkG,gBAAgB0B,QAAS,CAC3DC,KAAK,EACLC,OAAQ,CAACC,IAAK,EAAGC,IAAK,GACtBC,mBAAmB,EACnBC,mBAAmB,EACnBC,gBAAgB,EAChBC,QAAS,GACTC,aAAa,EACbC,OAAQzC,GACR0C,gBAAiB,kEAKFC,GACdxI,KAAKJ,MAAMgH,iBAAmB4B,EAAU5B,gBACzC5G,KAAKJ,MAAMiH,aAAe2B,EAAU3B,YACpC7G,KAAKJ,MAAMqH,aAAeuB,EAAUvB,aACpCK,QAAQC,IAAI,sBACTvH,KAAKyI,eACJzI,KAAKyI,cAAcC,eACvB1I,KAAKsG,QAAQqC,QAAQ,SAAAC,GACnBA,EAAEC,OAAO,QAEX7I,KAAKsG,QAAU,GACftG,KAAK0D,QAAU,GACf1D,KAAKwG,+CAIC,IAAAsC,EAAA9I,KAEF+I,EAAc/I,KAAKJ,MAAMgH,gBAAmB5G,KAAKJ,MAAMiH,YAAc7G,KAAKJ,MAAMiH,WAAW5H,OAAS,GAAMe,KAAKJ,MAAMqH,WAEnH+B,EAAO,CACXC,IAAK,qBACLC,WAAY,CAACvK,OAAQ,GAAID,MAAO,IAChCyK,OAAQ,CAACC,EAAE,EAAGC,EAAE,GAChBC,OAAQ,CAACF,EAAE,KAAMC,EAAE,OAGfE,EAAc,SAAC7J,GACnB,IACM8J,EADO,GACS9J,EACtB,OAAOI,OAAA2J,EAAA,EAAA3J,CAAA,GACJkJ,EADH,CAEAU,YAAa,IAAI5D,GAAO4B,KAAKiC,MAAM,KAAMH,EAAS,IAClDN,WAAY,CACVvK,OAAQ6K,EACR9K,MAAO8K,GAETF,OAAQ,CACNF,EAAGI,EAAO,EACVH,EAAEG,EAAO,MAKTI,EAAe,IAAI7D,OAAOD,OAAO4B,KAAKmC,aAE1C/J,OAAOgK,KAAK9J,KAAKI,MAAMsD,SAASiF,QAAQ,SAACoB,GAEvC,IAAIC,EAAalB,EAAK1I,MAAMsD,QAAQqG,GAAG,GAGnCE,GAAoB,EAExBnB,EAAKxC,QAAQqC,QAAQ,SAACC,EAAGsB,GACpBF,EAAWG,aAAapC,KAAOa,EAAEwB,SAASrC,OAC3CiC,EAAWG,aAAanC,KAAOY,EAAEwB,SAASpC,QAC1CY,EAAElF,QAAUkF,EAAElF,QAAQ2G,OAAOvB,EAAK1I,MAAMsD,QAAQqG,IAChDE,GAAoB,EACpBrB,EAAE0B,QAAQf,EAAY/J,EAAeoJ,EAAElF,QAAQzE,UAC/CqI,QAAQC,IAAI,wBAKhB,IAAMgD,EAAYzB,EAAK1I,MAAMsD,QAAQqG,GAClCxI,IAAK,SAAAuC,GAAC,OAAI3E,EAAW2E,EAAEU,YACvBgG,KAAK,MACF/K,EAASqJ,EAAK1I,MAAMsD,QAAQqG,GAAG9K,OAErC,IAAIgL,EAAmB,CACrB,IAAIQ,EAAS,IAAI3E,GAAO4B,KAAKgD,OAAO,CAChCN,SAAUJ,EAAWG,aACrBnB,KAAMO,EAAY/J,EAAeC,IACjCkL,MAAO5B,EAAa,CAClB6B,MAAO,OACPC,SAAU,OACVC,WAAY,iBACZC,KAAMR,QACJS,IAIRP,EAAO/G,QAAUoF,EAAK1I,MAAMsD,QAAQqG,GACpCU,EAAOQ,YAAY,QAAS,WAC1BnC,EAAKlJ,MAAMsL,cAAcT,EAAO/G,WAGlCoF,EAAKxC,QAAQ6E,KAAKV,GAClBb,EAAawB,OAAOpB,EAAWG,iBAInCnK,KAAKuB,IAAI8J,UAAUzB,GAEnB,IAAI0B,EAAWxF,GAAO4B,KAAK6D,MAAMN,YAAYjL,KAAKuB,IAAK,OAAQ,SAACuC,GAgC9D,GA/BAgC,GAAO4B,KAAK6D,MAAMC,eAAeF,GAEjChE,QAAQC,IAAI,WAAYuB,EAAKlJ,MAAM6L,UAC/B3C,EAAKlJ,MAAM6L,SAgBb3C,EAAKxC,QAAQqC,QAAQ,SAAAC,GACnBA,EAAEC,OAAOC,EAAKvH,OAhBhBuH,EAAKL,cAAgB,IAAIzC,GAAgB8C,EAAKvH,IAAKuH,EAAKxC,QACxD,CACEoF,SAAU,GACVC,mBAAoB,EACpBrD,OACM,CAAC,CACCwC,WAAY,iBACZc,UAAW,QACXC,SAAU,GACV5C,IAAK,yBACLtK,OAAQ,GACRD,MAAO,OASnBoH,GAAO4B,KAAK6D,MAAMN,YAAYnC,EAAKvH,IAAK,QAAS,SAACuC,GAChDgF,EAAKlJ,MAAMsL,cAAc,QAG3BpC,EAAKvC,MAAMoC,QAAQ,SAAAnH,GAAC,OAAEA,EAAEqH,OAAO,QAC/BC,EAAKvC,MAAQ,GAEVwC,EAAY,CAEb,IAAI+C,EAAQ,GAGZhM,OAAOgK,KAAKhB,EAAK1I,MAAMsD,SAASiF,QAAQ,SAAAoB,GACtCjB,EAAK1I,MAAMsD,QAAQqG,GAAGpB,QAAQ,SAAA7E,GAExBgI,EAAMhI,EAAEe,WACViH,EAAMhI,EAAEe,SAAW,IAErBiH,EAAMhI,EAAEe,SAASsG,KAAK,CACpBY,SAAUjI,EAAEqG,aACZ9F,KAAMP,EAAEO,WAKdiD,QAAQC,IAAIuE,GAGZhM,OAAOgK,KAAKgC,GAAOnD,QAAQ,SAAAoB,GACzB,IAAIxE,EAAIuG,EAAM/B,GACdxE,EAAEyG,KAAK,SAAC1M,EAAG2M,GAAK,OAAOA,EAAE5H,KAAK/E,EAAE+E,OAChC,IAAI6H,EAAe3G,EAAEhE,IAAI,SAAAC,GAAI,MAAO,CAACuG,IAAKvG,EAAEuK,SAAShE,IAAKC,IAAKxG,EAAEuK,SAAS/D,OAC1Ec,EAAKvC,MAAM4E,KACT,IAAIrF,GAAO4B,KAAKyE,SAAS,CACvBC,KAAMF,EAENG,YAAa,OACbC,cAAe,GACfC,aAAc,OAKpBzD,EAAKvC,MAAMoC,QAAQ,SAAAnH,GAAC,OAAEA,EAAEqH,OAAOC,EAAKvH,2CAMnC,IAAAiL,EAAAxM,KACP,MACE,CAACK,EAAAf,EAAAgB,cAACmM,GAAD,CAAcC,IAAK1M,KAAKkG,kBACvB7F,EAAAf,EAAAgB,cAACqM,GAAD,KAAmB3M,KAAKJ,MAAMgN,gBAAkBvM,EAAAf,EAAAgB,cAACuM,GAAD,CAC9CnJ,QAAS1D,KAAKJ,MAAMgN,eACpBhI,cAAe5E,KAAKJ,MAAMgF,cAC1B/F,aAAcmB,KAAKJ,MAAMf,aACzBE,OAAQiB,KAAKJ,MAAMb,OACnByD,MAAO,kBAAIgK,EAAK5M,MAAMsL,cAAc,OACpCnG,YAAa/E,KAAKJ,MAAMmF,YACxBR,kBAAmBvE,KAAKJ,MAAM2E,6BAtObzD,aAiPrB2L,GAAe1L,IAAOC,IAAV8L,IAKF,SAAAlN,GAAK,OAAqB,GAAjBA,EAAMmN,QAAmB,UAAY,WAGxDJ,GAAmB5L,IAAOC,IAAVgM,mjDCtUPC,eA9Cb,SAAAA,EAAYrN,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAiN,IACjBpN,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAmN,GAAA9M,KAAAH,KAAMJ,KACCQ,MAAQ,CACXsD,QAAS,IAHI7D,sMAQjBkG,OAAOgG,SAASmB,KAAOlN,KAAKJ,MAAMuN,OAElCjG,IAAMC,IAAIhJ,EAAS,kBAAoB6B,KAAKJ,MAAMuN,OAAS,KAC1D/F,KAAK,SAACC,GACLnF,EAAKyB,SAAS,CAAED,QAAS2D,EAASG,KAAK4F,SAExC3F,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,wIAIP,IAAA3B,EAAAnC,KAGD0D,EAAU1D,KAAKI,MAAMsD,QAAQnC,IAAI,SAACuC,EAAG9E,GAAJ,OACrCqB,EAAAf,EAAAgB,cAAC+M,GAAD,CAAUvO,IAAKE,GACbqB,EAAAf,EAAAgB,cAACgN,GAAD,CAAU1M,QAAS,WAAKuB,EAAKvC,MAAM2N,UAAUzJ,KAC1CA,EAAEO,KADL,KACalF,EAAW2E,EAAEU,UAD1B,OACyCrF,EAAW2E,EAAEM,UAG1D,OACE/D,EAAAf,EAAAgB,cAACkN,GAAD,KACEnN,EAAAf,EAAAgB,cAACmN,GAAD,KAAO/J,GAEPrD,EAAAf,EAAAgB,cAAA,SAAGD,EAAAf,EAAAgB,cAACoN,GAAD,CAAgB9M,QAAS,kBAAIuB,EAAKvC,MAAMmD,SAAS,UAAUnE,EAAEoB,KAAKJ,MAAMf,aAAc,YAAamB,KAAKJ,MAAMb,UAGjHsB,EAAAf,EAAAgB,cAAA,SAAI1B,EAAEoB,KAAKJ,MAAMf,aAAc,mBAAoBmB,KAAKJ,MAAMb,QAAQsB,EAAAf,EAAAgB,cAAA,WAAKD,EAAAf,EAAAgB,cAACqN,GAAD,CAAYC,KAAM,IAAI5N,KAAKJ,MAAMuN,QAASpH,OAAOgG,SAAS6B,OACrIvN,EAAAf,EAAAgB,cAAA,SAAI1B,EAAEoB,KAAKJ,MAAMf,aAAc,mBAAoBmB,KAAKJ,MAAMb,SAE9DsB,EAAAf,EAAAgB,cAACuN,GAAD,CAAqBjN,QAAS,WAAKuB,EAAKvC,MAAMgF,cAAc,CAACzC,EAAKvC,MAAMuN,WACrEvO,EAAEoB,KAAKJ,MAAMf,aAAc,kBAAmBmB,KAAKJ,MAAMb,iBAxC7C+B,aAiDjB+M,GAAsB9M,IAAOC,IAAV8M,MASnBJ,GAAiB3M,IAAOC,IAAV+M,MAUdP,GAAYzM,IAAOC,IAAVgN,MAKTV,GAAWvM,IAAOmE,KAAV+I,MAORN,GAAa5M,IAAOzB,EAAV4O,MAWVT,GAAO1M,IAAOc,GAAVsM,MAKJd,GAAWtM,IAAOgB,GAAVqM,UASFrN,IAAOmE,KAAVmJ,0uCC7GYC,eACnB,SAAAA,EAAY1O,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAsO,IACjBzO,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAwO,GAAAnO,KAAAH,KAAMJ,KACDQ,MAAQ,CACXoH,KAAM,IAGR3H,EAAK2G,UAAY3G,EAAK2G,UAAU5C,KAAf9D,OAAA+D,EAAA,EAAA/D,CAAAD,IANAA,2EASP,IAAAqC,EAAAlC,KAEN2G,EAAS,GACV3G,KAAKJ,MAAMgH,iBACZD,EAAOnC,SAAWxE,KAAKJ,MAAMgH,gBAE5B5G,KAAKJ,MAAMqH,aACZN,EAAOtC,KAAOrE,KAAKJ,MAAMqH,YAExBjH,KAAKJ,MAAMiH,YAAc7G,KAAKJ,MAAMiH,WAAW5H,OAAS,IACzD0H,EAAOG,QAAUC,KAAKC,UAAUhH,KAAKJ,MAAMiH,aAG7CK,IAAMC,IAAIhJ,EAAS,cAAe,CAACwI,WAClCS,KAAK,SAACC,GAELnF,EAAKyB,SAAS,CACZ6D,KAAMH,EAASG,SAGlBC,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,iDAKd9D,KAAKwG,uDAGYgC,GACdxI,KAAKJ,MAAMgH,iBAAmB4B,EAAU5B,gBACtC5G,KAAKJ,MAAMiH,aAAe2B,EAAU3B,YACpC7G,KAAKJ,MAAMqH,aAAeuB,EAAUvB,YAGvCjH,KAAKwG,+CAIEnC,EAAM5E,GAAQ,IAAA0C,EAAAnC,KACvB,OAAOK,EAAAf,EAAAgB,cAAA,MAAIxB,IAAKuF,GACdhE,EAAAf,EAAAgB,cAAA,QAAMiO,UAAU,YACZ9O,EAAS,EACTY,EAAAf,EAAAgB,cAAA,OAAKkO,MAAO,CAACC,UAAW,0BAA0BjP,EAAeC,GAAQ,KAAMiP,IAAKrK,EAAM1D,IAAI,uBAC9F,MAEJN,EAAAf,EAAAgB,cAAA,QAAMiO,UAAU,gBAChBlO,EAAAf,EAAAgB,cAAA,QAAMiO,UAAU,eACdlO,EAAAf,EAAAgB,cAACqO,GAAD,CAAY/N,QAAS,WAAKuB,EAAKvC,MAAMgP,cAAcvK,KAC/C5E,EAAS,EAAI4E,EAAO,yCAMrB,IAAAqC,EAAA1G,KACHwH,EAAOxH,KAAKI,MAAMoH,KACtB,IAAKA,GAAwB,IAAhBA,EAAKvI,OAAc,OAAO,KAGvC,IAAM4P,EAAgBrH,EAAK,GAAGnD,KAAOjG,EAAWC,MAC1CwQ,EAAgB,GACpBrH,EAAKsH,QAALC,MAAAvH,EAAI1H,OAAAkP,GAAA,EAAAlP,CAAYmP,MAAMC,KAAKD,MAAMJ,GAAgB,SAAC/K,EAAE9E,GAAH,MAAQ,CACvDqF,KAAKrF,GAAGwI,EAAK,GAAGnD,KAAKwK,GACrBpP,OAAO,OAKX,IAAM0P,EAAe/Q,EAAWE,IAAMkJ,EAAKA,EAAKvI,OAAO,GAAGoF,KACtD8K,EAAe,GAEjB3H,EAAK2D,KAAL4D,MAAAvH,EAAI1H,OAAAkP,GAAA,EAAAlP,CAASmP,MAAMC,KAAKD,MAAME,GAAe,SAACrL,EAAE9E,GAAH,MAAQ,CACnDqF,KAAKrF,GAAGwI,EAAKA,EAAKvI,OAAO,GAAGoF,KAAO8K,GACnC1P,OAAO,OAIX,IAAM2P,EAAY5H,EAAK,GAAGnD,KAEpBgL,EAAc7H,EAAKjG,IAAK,SAAA+N,GAAC,OAAI5I,EAAK6I,WAAWD,EAAEjL,KAAMiL,EAAE7P,UAE7D,OAAOY,EAAAf,EAAAgB,cAACkP,GAAD,CAAInR,MAAO+Q,GACbC,UA7F8BI,iBAkGjCd,GAAa5N,IAAOmE,KAAVwK,MAOVF,GAAKzO,IAAO4O,GAAVC,6nBCxCOC,eA/Db,SAAAA,EAAYjQ,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6P,IACjBhQ,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+P,GAAA1P,KAAAH,KAAMJ,KACDQ,MAAQ,CACXmK,UAAW,IAGb1K,EAAK2G,UAAY3G,EAAK2G,UAAU5C,KAAf9D,OAAA+D,EAAA,EAAA/D,CAAAD,IANAA,mFAUjBG,KAAKwG,gDAGK,IAAAtE,EAAAlC,KAEN2G,EAAS,GAEV3G,KAAKJ,MAAMgH,iBACZD,EAAOnC,SAAWxE,KAAKJ,MAAMgH,gBAE5B5G,KAAKJ,MAAMiH,YAAc7G,KAAKJ,MAAMiH,WAAW5H,OAAS,IACzD0H,EAAOG,QAAUC,KAAKC,UAAUhH,KAAKJ,MAAMiH,aAE1C7G,KAAKJ,MAAMqH,aACZN,EAAOtC,KAAOrE,KAAKJ,MAAMqH,YAG3BC,IAAMC,IAAIhJ,EAAS,qBAAsB,CAACwI,WACzCS,KAAK,SAACC,GAELnF,EAAKyB,SAAS,CAAE4G,UAAWlD,EAASG,SAErCC,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,gDAIG0E,GACdxI,KAAKJ,MAAMgH,iBAAmB4B,EAAU5B,gBACvC5G,KAAKJ,MAAMiH,aAAe2B,EAAU3B,YACpC7G,KAAKJ,MAAMqH,aAAeuB,EAAUvB,YACtCjH,KAAKwG,6CAIA,IAAArE,EAAAnC,KAED0D,EAAU1D,KAAKI,MAAMmK,UACxByB,KAAK,SAAC1M,EAAG2M,GAAJ,OAAW3M,EAAEwQ,QAAU7D,EAAE6D,QAAW,GAAK,IAC9CvO,IAAI,SAACuC,EAAG9E,GAAJ,OACHqB,EAAAf,EAAAgB,cAAA,MAAIxB,IAAKE,EAAG4B,QAAU,kBAAMuB,EAAKvC,MAAM2E,kBAAkBT,EAAEiM,QACzD1P,EAAAf,EAAAgB,cAAA,YAAOwD,EAAEgM,QAAT,KACAzP,EAAAf,EAAAgB,cAAA,YAAOnB,EAAW2E,EAAEiM,MAApB,QAAkCjM,EAAEkM,MAApC,QAGN,OACE3P,EAAAf,EAAAgB,cAAC2P,GAAD,CAAWxE,SAAUzL,KAAKJ,MAAM6L,UAC9BpL,EAAAf,EAAAgB,cAAA,UAAKoD,WA1DkB5C,aAkEzB0M,GAAYzM,IAAOC,IAAVkP,KAGN,SAAAtQ,GAAK,OAAIA,EAAM6L,SAAW,OAAS,MAwB9B1K,IAAOmE,KAAViL,oHC3CIC,eA/Cb,SAAAA,EAAYxQ,GAAQ,OAAAE,OAAAC,EAAA,EAAAD,CAAAE,KAAAoQ,GAAAtQ,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsQ,GAAAjQ,KAAAH,KACZJ,0EAIN,IAAMyQ,EAAiBrQ,KAAKJ,MAAMiH,WAAW5H,OAAS,GAAKe,KAAKJ,MAAMgH,gBAAkB5G,KAAKJ,MAAMqH,WAEnG,OACE5G,EAAAf,EAAAgB,cAACgQ,GAAD,KACEjQ,EAAAf,EAAAgB,cAACiQ,GAAD,CACE1J,WAAY7G,KAAKJ,MAAMiH,WACvBjC,cAAe5E,KAAKJ,MAAMgF,cAC1BgC,eAAgB5G,KAAKJ,MAAMgH,eAC3BK,WAAYjH,KAAKJ,MAAMqH,WACvBpI,aAAcmB,KAAKJ,MAAMf,aACzBE,OAAQiB,KAAKJ,MAAMb,OACnBgG,YAAa/E,KAAKJ,MAAMmF,YACxBmG,cAAelL,KAAKJ,MAAMsL,cAC1B0B,eAAgB5M,KAAKJ,MAAMgN,eAC3BrI,kBAAmBvE,KAAKJ,MAAM2E,kBAC9BkH,SAAU4E,IAGVrQ,KAAKJ,MAAMmF,aACX1E,EAAAf,EAAAgB,cAACkQ,GAAD,CACE5J,eAAgB5G,KAAKJ,MAAMgH,eAC3BC,WAAY7G,KAAKJ,MAAMiH,WACvBtC,kBAAmBvE,KAAKJ,MAAM2E,kBAC9B0C,WAAYjH,KAAKJ,MAAMqH,WACvBwE,SAAU4E,IAIZrQ,KAAKJ,MAAMmF,aACX1E,EAAAf,EAAAgB,cAACmQ,GAAD,CACE7J,eAAgB5G,KAAKJ,MAAMgH,eAC3BK,WAAYjH,KAAKJ,MAAMqH,WACvB2H,cAAe5O,KAAKJ,MAAMgP,cAC1B/H,WAAY7G,KAAKJ,MAAMiH,qBAvCZ/F,aAkDjB0M,GAAYzM,IAAOC,IAAV0P,89BCsIAC,eAvLb,SAAAA,EAAY/Q,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2Q,IACjB9Q,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6Q,GAAAxQ,KAAAH,KAAMJ,KA0BRgR,aAAe,SAACrF,GACV1L,EAAKO,MAAMoE,UAAa3E,EAAKO,MAAMgE,MAASvE,EAAKO,MAAMiE,OAC3DiD,QAAQC,IAAI1H,EAAKO,OACjBP,EAAK8D,SAAS,CAACkN,YAAY,IAEvBhR,EAAKO,MAAM0Q,IAkBb5J,IAAM6J,IAAI5S,EAAS,UAAY0B,EAAKO,MAAM0Q,IAAK,CAC7CtM,SAAU3E,EAAKO,MAAMoE,SACrBJ,KAAMvE,EAAKO,MAAMgE,KACjBC,KAAM2M,SAASnR,EAAKO,MAAMiE,MAC1BK,KAAM7E,EAAKO,MAAMsE,KACjBG,QAAShF,EAAKD,MAAMuN,SAErB/F,KAAK,SAACC,GACLC,QAAQC,IAAIF,GACZxH,EAAK8D,SAAS,CAACmN,IAAKzJ,EAASG,KAAKsJ,IAAKG,SAAS,EAAOJ,YAAY,MAEpEpJ,MAAM,SAACyJ,GACN5J,QAAQC,IAAI2J,KA7BdhK,IAAMiK,KAAKhT,EAAS,SAAU,CAC5BqG,SAAU3E,EAAKO,MAAMoE,SACrBJ,KAAMvE,EAAKO,MAAMgE,KACjBC,KAAM2M,SAASnR,EAAKO,MAAMiE,MAC1BK,KAAM7E,EAAKO,MAAMsE,KACjBG,QAAShF,EAAKD,MAAMuN,SAErB/F,KAAK,SAACC,GACLC,QAAQC,IAAIF,GACZxH,EAAK8D,SAAS,CAACmN,IAAKzJ,EAASG,KAAKsJ,IAAKG,SAAS,EAAOJ,YAAY,MAEpEpJ,MAAM,SAACyJ,GACN5J,QAAQC,IAAI2J,OA7CCrR,EAoEnBuR,aAAe,WAEVrL,OAAOsL,QAAQ,aACdxR,EAAK8D,SAAS,CAACkN,YAAY,IAC3B3J,IAAMoK,OAAOnT,EAAS,UAAY0B,EAAKO,MAAM0Q,IAAK,IAEnD1J,KAAK,SAACC,GACLC,QAAQC,IAAIF,GACZxH,EAAKD,MAAM2R,SAEZ9J,MAAM,SAACyJ,GACN5J,QAAQC,IAAI2J,OA/ECrR,EAsFnB2R,kBAAoB,SAACjG,GAAS,IAAAkG,EACtBC,EAASnG,EAAMmG,OACf3B,EAAO2B,EAAO3B,KACd4B,EAAiB,SAAT5B,GAA6B,SAATA,IAAoB6B,MAAMF,EAAOC,OAAUD,EAAOC,MAAQ9R,EAAKO,MAAMiE,KAEvGxE,EAAK8D,UAAL8N,EAAA,GAAA3R,OAAA+R,GAAA,EAAA/R,CAAA2R,EACG1B,EAAO4B,GADV7R,OAAA+R,GAAA,EAAA/R,CAAA2R,EAAA,WAEW,GAFXA,KA3FiB5R,EAiGnBiS,QAAU,SAAAzN,GACR,IAAM0N,EAAU3T,EAAWE,IACrB0T,EAAU5T,EAAWC,MAG3B,OAFKgG,EAAO2N,GAAoB,KAAT3N,IAAaA,EAAO2N,GACtC3N,EAAO0N,IAAS1N,EAAO0N,GACrB1N,GApGPxE,EAAKO,MAAQ,CACXoE,SAAU3E,EAAKD,MAAMqS,MAAQpS,EAAKD,MAAMqS,MAAMzN,SAAW,GACzDJ,KAAMvE,EAAKD,MAAMqS,MAAQpS,EAAKD,MAAMqS,MAAM7N,KAAO,GACjDC,KAAMxE,EAAKD,MAAMqS,MAAQpS,EAAKD,MAAMqS,MAAM5N,KAAO,GACjDK,KAAM7E,EAAKD,MAAMqS,MAAQpS,EAAKD,MAAMqS,MAAMvN,KAAO,GACjDoM,IAAKjR,EAAKD,MAAMqS,MAAQpS,EAAKD,MAAMqS,MAAMnB,IAAM,KAC/CvG,UAAW,GACX2H,OAAQ,GACRjB,SAAS,EACTJ,YAAY,GAXGhR,sMAgBjBqH,IAAMC,IAAIhJ,EAAS,mBAClBiJ,KAAK,SAACC,GACLC,QAAQC,IAAIF,GACZnF,EAAKyB,SAAS,CAAC4G,UAAWlD,EAASG,KAAK+C,YACxCrI,EAAKyB,SAAS,CAACuO,OAAQ7K,EAASG,KAAK0K,WAEtCzK,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,mIAkFP,IAAA3B,EAAAnC,KACP,OACEK,EAAAf,EAAAgB,cAAC6R,GAAD,KACE9R,EAAAf,EAAAgB,cAAC8R,GAAD,KAEE/R,EAAAf,EAAAgB,cAAC+R,GAAD,KAAQzT,EAAEoB,KAAKJ,MAAMf,aAAc,cAAemB,KAAKJ,MAAMb,SAC7DsB,EAAAf,EAAAgB,cAAA,YAAUyP,KAAK,OAAOuC,UAAU,MAAMX,MAAO3R,KAAKI,MAAMsE,KAAM6N,SAAUvS,KAAKwR,oBAC7EnR,EAAAf,EAAAgB,cAAA,WAEAD,EAAAf,EAAAgB,cAAC+R,GAAD,KAAQzT,EAAEoB,KAAKJ,MAAMf,aAAc,kBAAmBmB,KAAKJ,MAAMb,SAEjEsB,EAAAf,EAAAgB,cAACkS,GAAAlT,EAAD,CACEmT,MAAOzS,KAAKI,MAAMmK,UAAUhJ,IAAI,SAACqH,GAAK,MAAO,CAAC+I,MAAOxS,EAAWyJ,MAChE8J,aAAc,SAAAC,GAAI,OAAIA,EAAKhB,OAC3BiB,iBAAkB,SAACD,EAAMhB,GAAP,OAAiBgB,EAAKhB,MAAMkB,cAAcC,QAAQnB,EAAMkB,gBAAkB,GAC5FE,WAAY,SAACJ,EAAMK,GAAP,OACV3S,EAAAf,EAAAgB,cAAA,OACExB,IAAK6T,EAAKhB,MACVnD,MAAO,CAAEjG,gBAAiByK,EAAc,OAAS,gBAEhDL,EAAKhB,QAGVA,MAAOxS,EAAWa,KAAKI,MAAMoE,UAC7B+N,SAAU,SAACzO,GAAD,OAAO3B,EAAKwB,SAAS,CAACa,SAAUV,EAAE4N,OAAOC,MAAOV,SAAS,KACnEgC,SAAU,SAACC,GAAD,OAAS/Q,EAAKwB,SAAS,CAACa,SAAU0O,EAAKjC,SAAS,KAC1DkC,aAAc,CAACC,QAAS,SACxBC,UAAWA,GACXC,WAAY,CAAC9E,MAAO+E,MAGtBlT,EAAAf,EAAAgB,cAAA,WACAD,EAAAf,EAAAgB,cAAC+R,GAAD,KAAQzT,EAAEoB,KAAKJ,MAAMf,aAAc,cAAemB,KAAKJ,MAAMb,SAE7DsB,EAAAf,EAAAgB,cAACkS,GAAAlT,EAAD,CACEmT,MAAOzS,KAAKI,MAAM8R,OAAO3Q,IAAI,SAACiS,GAAK,MAAO,CAAC7B,MAAOxS,EAAWqU,MAC7Dd,aAAc,SAAAC,GAAI,OAAIA,EAAKhB,OAC3BiB,iBAAkB,SAACD,EAAMhB,GAAP,OAAiBgB,EAAKhB,MAAMkB,cAAcC,QAAQnB,EAAMkB,gBAAkB,GAC5FE,WAAY,SAACJ,EAAMK,GAAP,OACV3S,EAAAf,EAAAgB,cAAA,OACExB,IAAK6T,EAAKhB,MACVnD,MAAO,CAAEjG,gBAAiByK,EAAc,OAAS,gBAEhDL,EAAKhB,QAGVA,MAAOxS,EAAWa,KAAKI,MAAMgE,MAC7BmO,SAAU,SAACzO,GAAD,OAAO3B,EAAKwB,SAAS,CAACS,KAAMN,EAAE4N,OAAOC,MAAOV,SAAS,KAC/DgC,SAAU,SAACC,GAAD,OAAS/Q,EAAKwB,SAAS,CAACS,KAAM8O,EAAKjC,SAAS,KACtDkC,aAAc,CAACC,QAAS,QAASK,QAAS,GAC1CJ,UAAWA,GACXC,WAAY,CAAC9E,MAAO+E,MAGtBlT,EAAAf,EAAAgB,cAAA,WACAD,EAAAf,EAAAgB,cAAC+R,GAAD,KAAQzT,EAAEoB,KAAKJ,MAAMf,aAAc,cAAemB,KAAKJ,MAAMb,SAC7DsB,EAAAf,EAAAgB,cAAA,SACEoT,aAAa,MACbhU,KAAK,IACLiU,UAAU,IACVC,KAAK,OACL7D,KAAK,OACL4B,MAAO3R,KAAKI,MAAMiE,KAClBkO,SAAUvS,KAAKwR,kBACfqC,OAAQ,kBAAM1R,EAAKwB,SAAS,CAACU,KAAKlC,EAAK2P,QAAQ3P,EAAK/B,MAAMiE,WAE5DhE,EAAAf,EAAAgB,cAAA,WACEN,KAAKI,MAAMyQ,WAIXxQ,EAAAf,EAAAgB,cAAA,YAAO1B,EAAEoB,KAAKJ,MAAMf,aAAc,MAAOmB,KAAKJ,MAAMb,SAJ5BsB,EAAAf,EAAAgB,cAAA,WACvBN,KAAKI,MAAM6Q,SAAW5Q,EAAAf,EAAAgB,cAACwT,GAAD,CAAQlT,QAASZ,KAAK4Q,cAAehS,EAAEoB,KAAKJ,MAAMf,aAAc,aAAcmB,KAAKJ,MAAMb,SAC/GiB,KAAKI,MAAM0Q,KAAOzQ,EAAAf,EAAAgB,cAACwT,GAAD,CAAQlT,QAASZ,KAAKoR,cAAexS,EAAEoB,KAAKJ,MAAMf,aAAc,eAAgBmB,KAAKJ,MAAMb,mBA/KnG+B,aA0LjB0M,GAAYzM,IAAOC,IAAV+S,MAIT1B,GAAQtR,IAAO4J,MAAVqJ,MAOLT,GAAyB,GAEzBF,GAAY,CAChBY,aAAc,MACdC,UAAW,gCACXC,WAAY,2BACZC,QAAS,QACTvJ,SAAU,OACVT,SAAU,QACViK,SAAU,OAEVC,UAAW,QAGPlC,GAAOrR,IAAOwT,KAAVC,MA6BJV,GAAS/S,IAAOC,IAAVyT,8hCClPZ,IAAIC,GAAStT,EAAQ,IAuENuT,eApEb,SAAAA,EAAY/U,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2U,IACjB9U,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6U,GAAAxU,KAAAH,KAAMJ,KAcRgV,WAAa,SAAApN,GACPA,IACF3H,EAAK8D,SAAS,CACZkR,OAAQrN,IAGkB,QAAxBA,EAAKsN,UAAU,EAAG,GACpBjV,EAAKD,MAAMgF,cAAc,CAAC/E,EAAKD,MAAMuN,SAErCtN,EAAKD,MAAMgF,cAAc,CAAC/E,EAAKD,MAAMuN,OAAQ3F,IAG/CN,IAAMC,IAAIhJ,EAAS,eAAiBqJ,EAAO,IAAM3H,EAAKD,MAAMuN,QAC3D/F,KAAK,SAACC,GACLC,QAAQC,IAAIF,KAEbI,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,OAhCCjE,EAqCnBkV,YAAc,SAAAC,GACZ1N,QAAQ4J,MAAM8D,IApCZnV,EAAKO,MAAQ,CACXyU,OAAQ,eAHKhV,mFAOC,IAAAqC,EAAAlC,KAClBA,KAAKiV,aAAeC,YAAY,WAAKhT,EAAKtC,MAAMuV,WAAWjT,EAAKtC,MAAMuN,SAAU,oDAIhFiI,cAAcpV,KAAKiV,+CA+BnB,OACE5U,EAAAf,EAAAgB,cAAC+U,GAAD,KAEIhV,EAAAf,EAAAgB,cAACgV,GAAD,KACEjV,EAAAf,EAAAgB,cAACoU,GAAD,CACE/C,MAAO3R,KAAKJ,MAAMuN,OAClBzN,KAAM,OAIVW,EAAAf,EAAAgB,cAACiV,GAAD,KACElV,EAAAf,EAAAgB,cAACkV,GAAAlW,EAAD,CACEmW,MAAO,IACPC,QAAS1V,KAAK+U,YACdY,OAAQ3V,KAAK4U,aAEfvU,EAAAf,EAAAgB,cAAA,SAAIN,KAAKI,MAAMyU,iBA5DJ/T,aAyEjB0M,GAAYzM,IAAOC,IAAV4U,KAFI,QAUbN,GAAOvU,IAAOC,IAAV6U,KAVS,QA4BbN,GAAUxU,IAAOC,IAAV8U,KA5BM,gaCpDJC,eApBb,SAAAA,EAAYnW,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA+V,IACjBlW,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAiW,GAAA5V,KAAAH,KAAMJ,KACCQ,MAAQ,GAFEP,wEAQjB,OACEQ,EAAAf,EAAAgB,cAAC0V,GAAD,KAEE3V,EAAAf,EAAAgB,cAAA,OACE2V,wBAAyB,CAACC,OAAQtX,EAAEoB,KAAKJ,MAAMf,aAAcmB,KAAKJ,MAAMuW,QAAU,WAAYnW,KAAKJ,MAAMb,mBAb1F+B,aAuBnBkV,GAAkBjV,IAAOC,IAAVoV,MCKNC,eAhCb,SAAAA,EAAYzW,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAqW,IACjBxW,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAuW,GAAAlW,KAAAH,KAAMJ,KACDQ,MAAQ,GAFIP,wEAUjB,IAFA,IAAIyW,EAAU,GAENtX,EAAI,EAAGA,EAAI,IAAKA,IACtBsX,EAAQnL,KACN9K,EAAAf,EAAAgB,cAAA,UAAQiW,GAAG,MAAMC,GAAG,OAAOC,EAHpB,EAGuBzX,EAAU0X,OAAO,OAAOC,YAAY,IAAIC,KAAK,UAY/E,OACGvW,EAAAf,EAAAgB,cAAA,OAAKkO,MAAO,CAACpE,SAAU,YAAazL,OAAO,OAAOD,MAAM,QACtD4X,UA3BaxV,0lCCiBtB,IAAM+V,GAASzV,EAAQ,IAoTR0V,eAjTb,SAAAA,EAAYlX,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8W,IACjBjX,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgX,GAAA3W,KAAAH,KAAMJ,KA0BRmX,SAAW,SAACrY,EAAOC,GACjBkB,EAAK8D,SAAS,CACZoB,YAAatG,EAAcC,EAAOC,MA7BnBkB,EAiCnB8B,UAAY,SAACH,GACX3B,EAAK8D,SAAS,CAAC5E,OAAQyC,KAlCN3B,EA4JnBmX,WAAa,WACX,GAAInX,EAAKO,MAAMI,SAAU,CACvB,GAA6B,QAA1BX,EAAKO,MAAM6W,YAEZ,YADApX,EAAK0R,OAIP1R,EAAKkD,SAAS,QAEhBlD,EAAK8D,SAAS,CAACnD,UAAWX,EAAKO,MAAMI,YArKpBX,EAwKnBkD,SAAW,SAACmU,EAAMjF,GAChB,KADsCkF,UAAAlY,OAAA,QAAA+L,IAAAmM,UAAA,IAAAA,UAAA,IAC1B,CACV,IAAIC,EAAWvX,EAAKO,MAAMgX,SAC1BA,EAASjM,KAAKtL,EAAKO,MAAM6W,aAEzBpX,EAAK8D,SAAS,CAACyT,aASjB,GAPAvX,EAAK8D,SAAS,CACZnD,SAAmB,SAAT0W,EACVD,YAAaC,EACbG,aAAcpF,EACdkE,QAASlE,EACTrF,eAAgB,OAEP,QAARsK,EAAgB,CACjB,IAAII,EAAWvR,OAAOgG,SAASwL,UAAY1X,EAAKO,MAAMoX,aAAe,kBAAoB3X,EAAKO,MAAMoX,aAAe,IACnHzR,OAAO0R,QAAQC,UAAU,GAAIC,SAASvV,MAAOkV,KAxL9BzX,EA4LnBiD,MAAQ,WACNjD,EAAK+E,cAAc,IACnB/E,EAAKkD,SAAS,SA9LGlD,EAiMnB0R,KAAO,WACL,GAA6B,QAA1B1R,EAAKO,MAAM6W,YAAd,CAKA,IAAIG,EAAWvX,EAAKO,MAAMgX,SACtBQ,EAAeR,EAASS,MAC5BhY,EAAK8D,SAAS,CAACyT,aACfvX,EAAKkD,SAAS6U,EAAc/X,EAAKO,MAAM6R,OAAO,QAP5CpS,EAAKkD,SAAS,SAjMhBlD,EAAKO,MAAQ,CACX0X,SAAU,GACVtX,UAAU,EACVyW,YAAa,OACb9J,OAAQ,KACRiK,SAAU,GACVvQ,WAAY,GACZD,eAAgB,KAChBK,WAAY,KACZ2F,eAAgB,KAChB/N,aAAc,GACdE,OAAQ,KACRyY,aAAc,MAGhB3X,EAAK+E,cAAgB/E,EAAK+E,cAAchB,KAAnB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IACrBA,EAAK0E,kBAAoB1E,EAAK0E,kBAAkBX,KAAvB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IACzBA,EAAK+O,cAAgB/O,EAAK+O,cAAchL,KAAnB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IACrBA,EAAK8B,UAAY9B,EAAK8B,UAAUiC,KAAf9D,OAAA+D,EAAA,EAAA/D,CAAAD,IACjBA,EAAKsV,WAAatV,EAAKsV,WAAWvR,KAAhB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IAClBA,EAAKkY,kBAAoBlY,EAAKkY,kBAAkBnU,KAAvB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IACzBA,EAAKqL,cAAgBrL,EAAKqL,cAActH,KAAnB9D,OAAA+D,EAAA,EAAA/D,CAAAD,IAvBJA,6EAqCLmY,GAAQ,IAAA9V,EAAAlC,KACpBA,KAAK2D,SAAS,CACZkD,WAAYmR,EACZpR,eAAgB,KAChBK,WAAY,KACZ2F,eAAgB,MACf,WAC4B,QAA1B1K,EAAK9B,MAAM6W,aACZ/U,EAAKa,SAAS,oDAKFyB,GAChB8C,QAAQC,IAAI,oBAAqB/C,GACjCxE,KAAK2D,SAAS,CACZiD,eAAgBpC,EAChBqC,WAAY,GACZI,WAAY,KACZ2F,eAAgB,6CAINvI,GACZrE,KAAK2D,SAAS,CACZiD,eAAgB,KAChBC,WAAY,GACZI,WAAY5C,EACZuI,eAAgB,6CAINlJ,GACZ1D,KAAK2D,SAAS,CAACiJ,eAAgBlJ,uCAGtBuU,GAAI,IAAA9V,EAAAnC,KACbkH,IAAMC,IAAIhJ,EAAS,oBAAsB8Z,GACxC7Q,KAAK,SAACC,GAEL,GADAC,QAAQC,IAAIF,GACTA,EAASG,MAAQH,EAASG,KAAK4F,MAAQ/F,EAASG,KAAK4F,KAAKnO,OAAQ,CACnE,IAAIiZ,EAAM/V,EAAK/B,MAAMoX,aAAe,GAAK,CAACS,GAC1C5Q,EAASG,KAAK4F,KAAK,GAAG4K,OAAOrP,QAAQ,SAAAwP,GAAWD,EAAI/M,KAAKgN,KACzDhW,EAAKyC,cAAcsT,MAGtBzQ,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,iDAMdwD,QAAQC,IAAI,qBAEZL,IAAMC,IAAIhJ,EAAS,mBAAqB6B,KAAKI,MAAMoX,aAAexX,KAAKI,MAAMoX,aAAexX,KAAKI,MAAM+M,SACtG/F,KAAK,SAACC,GACLC,QAAQC,IAAIF,KAEbI,MAAM,SAAC3D,GACNwD,QAAQC,IAAIzD,KAGd9D,KAAK4E,cAAc,IACnB5E,KAAKuE,kBAAkB,MACvBvE,KAAK4O,cAAc,+LAME1H,IAAMC,IAAIhJ,EAAS,uBAApCkJ,SAEJrH,KAAK2D,SAAS,CAAC9E,aAAcwI,EAASG,KAAK4F,OAEvCgL,EAAgB,KACjBC,kBACGC,EAAc,IAAID,gBAAgBtS,OAAOgG,SAASwM,QACtDH,EAAgBE,EAAYnR,IAAI,kBAG/BiR,GAEDpY,KAAK2D,SAAS,CACZ6T,aAAcY,IAIhBpY,KAAKiV,aAAeC,YAAY,WAAKxO,EAAKyO,WAAWiD,IAAiB,OAIlElL,EAAOnH,OAAOgG,SAASmB,KACvBC,EAASqL,aAAaC,QAAQ,UAC/BvL,IACDC,EAASD,EAAKwL,OAAO,GACrB1Y,KAAK2D,SAAS,CACZsT,YAAa,OACb9J,OAAQA,EACR3M,UAAU,EACV4W,SAAU,CAAC,WAGXjK,IACFA,EAAS0J,MAEX7W,KAAK2D,SAAS,CAACwJ,OAAQA,IACvBqL,aAAaG,QAAQ,SAAUxL,IAIjCyL,4BAAkBjB,SAASkB,cAAc,0JAKzCzD,cAAcpV,KAAKiV,+CAoDZ,IAAAnM,EAAA9I,KACDqQ,EAAiBrQ,KAAKI,MAAMyG,WAAW5H,OAAS,GAAKe,KAAKI,MAAMwG,gBAAkB5G,KAAKI,MAAM6G,WAE7F6R,EAAQ,CACZC,KAAQ1Y,EAAAf,EAAAgB,cAAC0Y,GAAD,CAAU7L,OAAQnN,KAAKI,MAAM+M,OACnCtG,WAAY7G,KAAKI,MAAMyG,WACvBjC,cAAe5E,KAAK4E,cACpBgC,eAAgB5G,KAAKI,MAAMwG,eAC3BrC,kBAAmBvE,KAAKuE,kBACxB0C,WAAYjH,KAAKI,MAAM6G,WACvB2H,cAAe5O,KAAK4O,cACpB7J,YAAa/E,KAAKI,MAAM2E,YACxBlG,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnBmM,cAAelL,KAAKkL,cACpB0B,eAAgB5M,KAAKI,MAAMwM,iBAE7BqM,KAAQ5Y,EAAAf,EAAAgB,cAAC4Y,GAAD,CACN/L,OAAQnN,KAAKI,MAAM+M,OAAQI,UAAW,SAAC0E,GAASnJ,EAAK/F,SAAS,OAAQkP,IACtEpT,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnB6F,cAAe5E,KAAK4E,cACpBtC,SAAS,aACTS,SAAU/C,KAAK+C,WAEjBoW,KAAQ9Y,EAAAf,EAAAgB,cAAC8Y,GAAD,CACNjM,OAAQnN,KAAKI,MAAM+M,OAAQoE,KAAMvR,KAAKuR,KACtCU,MAAOjS,KAAKI,MAAMiX,aAClBxY,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnBuD,SAAUtC,KAAKI,MAAMiX,aAAe,eAAiB,cAEvDgC,KAAQhZ,EAAAf,EAAAgB,cAACgZ,GAAD,CACNnM,OAAQnN,KAAKI,MAAM+M,OAAQvI,cAAe5E,KAAK4E,cAC/C/F,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnBoW,WAAYnV,KAAKmV,WACjB7S,SAAS,YAEX4U,KAAQ7W,EAAAf,EAAAgB,cAACiZ,GAAD,CACN1a,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnBoX,QAASnW,KAAKI,MAAM+V,QACpB7T,SAAUtC,KAAKI,MAAM+V,QAAU,cAG/BqD,EAAcV,EAAK,KAEjB5B,EAAkC,SAA3BlX,KAAKI,MAAM6W,YAAyB6B,EAAM9Y,KAAKI,MAAM6W,aAAe,KAEjF,MACE,CACE5W,EAAAf,EAAAgB,cAACmZ,GAAD,CAAc3a,IAAI,iBAClBuB,EAAAf,EAAAgB,cAACoZ,EAAA,EAAD,CAAqB5a,IAAI,SAAS6a,aAAW,EAACC,cAAY,EAAC7C,SAAU/W,KAAK+W,WAC1E1W,EAAAf,EAAAgB,cAACuZ,EAAD,CACErZ,SAAUR,KAAKI,MAAMI,SACrB1B,IAAI,OACJ0D,MAAOxC,KAAKgX,WACZjU,SAAU/C,KAAK+C,SACflE,aAAcmB,KAAKI,MAAMvB,aACzBE,OAAQiB,KAAKI,MAAMrB,OACnB4C,UAAW3B,KAAK2B,UAChBmB,MAAO9C,KAAK8C,MACZE,iBAAgBhD,KAAKI,MAAMoX,aAC3BnV,OAAQ6U,IAEV7W,EAAAf,EAAAgB,cAACwZ,GAAD,CAAahb,IAAI,QACfuB,EAAAf,EAAAgB,cAACyZ,GAAD,OAEE1J,GACAhQ,EAAAf,EAAAgB,cAAC0Z,GAAD,KACE3Z,EAAAf,EAAAgB,cAAC2Z,GAAD,CAAYrZ,QAASZ,KAAKgX,WAAYrW,IAAI,oBAC1CN,EAAAf,EAAAgB,cAAC4Z,GAAD,mBAIH7J,GACChQ,EAAAf,EAAAgB,cAACoC,EAAD,CAAS7B,QAASb,KAAK+X,kBAAmBvX,SAAUR,KAAKI,MAAMI,UAC3DR,KAAKI,MAAMyG,WAAW5H,OAAS,GAC/BoB,EAAAf,EAAAgB,cAAA,YAAO1B,EAAEoB,KAAKI,MAAMvB,aAAc,aAAcmB,KAAKI,MAAMrB,QAA3D,OACOiB,KAAKI,MAAMyG,WAAW5H,OAD7B,OAECe,KAAKI,MAAMyG,WAAW5H,OAAS,EAAIL,EAAEoB,KAAKI,MAAMvB,aAAc,QAASmB,KAAKI,MAAMrB,QAAUH,EAAEoB,KAAKI,MAAMvB,aAAc,OAAQmB,KAAKI,MAAMrB,SAE3IiB,KAAKI,MAAMwG,gBAAmBvG,EAAAf,EAAAgB,cAAA,YAAO1B,EAAEoB,KAAKI,MAAMvB,aAAc,aAAcmB,KAAKI,MAAMrB,QAA3D,IAAqEH,EAAEoB,KAAKI,MAAMvB,aAAc,mBAAoBmB,KAAKI,MAAMrB,QAA/H,IAAyII,EAAWa,KAAKI,MAAMwG,iBAC7L5G,KAAKI,MAAM6G,YAAe5G,EAAAf,EAAAgB,cAAA,YAAO1B,EAAEoB,KAAKI,MAAMvB,aAAc,aAAcmB,KAAKI,MAAMrB,QAA3D,IAAqEH,EAAEoB,KAAKI,MAAMvB,aAAc,oBAAqBmB,KAAKI,MAAMrB,QAAhI,IAA0IiB,KAAKI,MAAM6G,aAIpLuS,GAC4B,SAA3BxZ,KAAKI,MAAM6W,cAA2B5G,GAA2C,QAA1BrQ,KAAKI,MAAM6W,cAClE5W,EAAAf,EAAAgB,cAAC6Z,GAAD,CAAWvZ,QAAS,kBAAIkI,EAAK/F,SAAS,SAASgC,YAAa/E,KAAKI,MAAM2E,aAAvE,cAxSgBjE,aAoTtBkZ,GAAUjZ,IAAOC,IAAVoZ,MAQPF,GAAWnZ,IAAOmE,KAAVmV,MAMRxX,GAAa9B,IAAOG,IAAVoZ,MAMVR,GAAc/Y,IAAOC,IAAVuZ,MAMXJ,GAAYpZ,IAAOC,IAAVwZ,KAIF,SAAA5a,GAAK,OAAKA,EAAMmF,YAAc,OAAS,SAc9C0U,GAAegB,YAAHC,MClXHC,GADH,kBAAMta,EAAAf,EAAAgB,cAACsa,GAAD,OCSEC,QACW,cAA7B9U,OAAOgG,SAAS+O,UAEe,UAA7B/U,OAAOgG,SAAS+O,UAEhB/U,OAAOgG,SAAS+O,SAASC,MACvB,2DCZNC,IAAS3Y,OAAOhC,EAAAf,EAAAgB,cAAC2a,GAAD,MAAStD,SAASuD,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMjU,KAAK,SAAAkU,GACjCA,EAAaC","file":"static/js/main.140d68ec.chunk.js","sourcesContent":["export const apiUrl = \"/api\"\n\nexport const yearsRange = {\n  start: 1950,\n  end: new Date().getFullYear()\n}\n\nexport const isLargeScreen = function(width, height) {\n  return width > 600 && height > 400\n}\n\nexport function t(translations, key, locale) {\n  for(let i = 0; i < translations.length; i++) {\n    if(translations[i].key == key) {\n      let content = translations[i][\"content_\" + locale];\n      return content ? content : \"[\"+ key + \"]\";\n    }\n  }\n  return \"[\"+ key + \"]\";\n}\n\nexport function capitalize(s) {\n  if(!s.replace) return \"\"\n    return s.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); });\n}\n\nexport function makeMarkerSize(amount) {\n  // get a total amount and return a scale factor between 1 and 5\n  let size = amount * 0.8\n  if (size > 5) size = 5;\n  if (size < 1) size = 1;\n  return size\n}","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { isLargeScreen } from '../helpers/'\n\n\nclass InfoBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n\n  render() {\n    return (\n      <UserFilterInfo menuOpen={this.props.menuOpen}>\n        { this.props.children }\n\n        <ExitButton src=\"/images/close.png\" onClick={this.props.onClose}/>\n      </UserFilterInfo>\n    )\n  }\n}\n\nexport default InfoBar;\n\nconst UserFilterInfo = styled.div`\n  background-color: ${props => (!props.menuOpen ? \"white\" : \"none\") };\n  position: ${props => (!props.menuOpen ? \"absolute\" : \"relative\") };;\n  z-index: 10;\n  min-height: 60px;\n  padding: 1.25rem;\n  padding-right: calc(30px + 1rem);\n  border-bottom: ${props => (!props.menuOpen ? \"1px solid #ddd\" : \"border: none\") };\n  display: flex;\n  font-size: 1.25rem;\n  width: 100%;\n`\n\nconst ExitButton = styled.img`\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  width: 30px;\n  height: 30px;\n  &:hover {cursor: pointer};\n`\n","import React, { Component } from 'react';\nimport styled from 'styled-components'\n\nimport { t } from '../helpers'\nimport InfoBar from './InfoBar.js'\n\nconst uuidv1 = require('uuid/v1');\n\nclass LocaleToggle extends Component {\n  render () {\n    const localeOptions = [\"en\", \"de\"].map((l)=>\n      <LocaleOption key={l} active={l == this.props.locale} onClick={()=>this.props.setLocale(l)}><span>{l}</span></LocaleOption>\n    )\n    return (\n      <div>\n        <LocaleContainer>\n          {localeOptions}        \n        </LocaleContainer>\n      </div>\n    )\n  }\n}\n\nconst LocaleContainer = styled.ul`\n  margin-left: 0px;\n  padding-left: 0px;\n  margin-top: 40px;\n`\n\nconst LocaleOption = styled.li`\n  text-decoration: none;\n  list-style: none;\n  font-size: 16px;\n  font-family: \"NeutraTextLight\";\n  span { \n    font-family: ${props=>props.active ? \"NeutraText\" : \"NeutraTextLight\"}; \n    padding: 5px;\n  }\n  :hover {cursor: ${props=>props.active ? \"default\" : \"pointer\"}};\n  :first-child {:after { content: \"/\" }};\n  display: inline-block;\n`\n\n\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  render() {\n\n    const title = this.props.render && this.props.render.props.titleKey\n      ? t(this.props.translations, this.props.render.props.titleKey, this.props.locale) \n      : t(this.props.translations, \"menu\", this.props.locale)\n\n    return (\n      [<MenuShadow onClick={this.props.close} menuOpen={this.props.menuOpen}/>,\n      <MenuContainer menuOpen={this.props.menuOpen}>\n\n        <InfoBar onClose={this.props.close} menuOpen={this.props.menuOpen}>\n          { title }\n        </InfoBar>\n\n        { this.props.render \n          ? \n            <ContentContainer>\n              {this.props.render}\n            </ContentContainer>\n          :\n            <ContentContainer>\n              <MenuContent>\n                <MenuButton onClick={this.props.reset}>{t(this.props.translations, \"home\", this.props.locale)}</MenuButton>\n                <MenuButton onClick={()=>this.props.navigate(\"page\", \"programm\")}>{t(this.props.translations, \"programm\", this.props.locale)}</MenuButton>\n                <MenuButton onClick={()=>this.props.navigate(\"page\", \"howto\")}>{t(this.props.translations, \"howto\", this.props.locale)}</MenuButton>\n                {!this.props.projectionMode && <MenuButton onClick={()=>this.props.navigate(\"list\")}>{t(this.props.translations, \"my_entries\", this.props.locale)}</MenuButton>}\n                {!this.props.projectionMode && <MenuButton onClick={()=>this.props.navigate(\"scan\")}>{t(this.props.translations, \"scanner\", this.props.locale)}</MenuButton>}\n                <MenuButton onClick={()=>this.props.navigate(\"page\", \"credits\")}>{t(this.props.translations, \"credits\", this.props.locale)}</MenuButton>\n                \n                <LocaleToggle \n                  locale={this.props.locale} \n                  setLocale={this.props.setLocale}\n                  translations={this.props.translations}\n                />\n              </MenuContent>\n            </ContentContainer>\n        }\n\n      </MenuContainer>]\n    );\n  }\n}\n\nexport default Menu;\n\nconst MenuButton = styled.li`\n  margin-bottom: 0.625rem;\n  &:hover {cursor: pointer};\n`\n\nconst MenuContainer = styled.div`\n  width: 50%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  visibility: ${ props => (props.menuOpen ? \"visibile\" : \"hidden\") };\n  z-index: 300;\n\n  display: flex;\n  flex-direction: column;\n  background-color: white;\n\n  @media only screen and (max-width: 768px) {\n    width: 100%;\n  }\n`\n\nconst MenuShadow = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  opacity: 0.5;\n  z-index: 300;\n  display: ${ props => (props.menuOpen ? \"block\" : \"none\") };\n`\n\nconst ContentContainer = styled.div`\n  flex:1;\n  padding-top: 0rem; // height of the top bar, ~4rem\n  overflow-y: auto;\n`\n\nconst MenuContent = styled.ul`\n  padding: 1.25rem;\n  font-size: 1.25rem;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport styled, { keyframes } from 'styled-components'\n\nimport { capitalize, makeMarkerSize, t } from '../helpers'\n\nclass InfoWindow extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        entryIndex: 0\n    }\n\n    this.nextEntry = this.nextEntry.bind(this);\n  }\n\n  nextEntry = ()=> {\n    if(this.state.entryIndex < this.props.entries.length - 1) {\n      this.setState({entryIndex: this.state.entryIndex + 1})  \n    } else {\n      this.setState({entryIndex: 0})  \n    }\n  }\n\n  render() {\n\n    let entries = this.props.entries.map((e, index)=>\n      <Entry>\n        \n        <CloseButton onClick={this.props.close} src=\"/images/closeWhite.png\"/>\n        <PageNum><Bold>{capitalize(e.city)}</Bold> {this.state.entryIndex + 1}/{this.props.entries.length}</PageNum>\n        <p>\n        <Bold>{e.year}</Bold> <MusicianLink onClick={()=>{this.props.setMusicianFilter(e.musician)}}\n        >>&nbsp;{capitalize(e.musician)}</MusicianLink>\n        </p> \n        <Note>\n        {e.note ? '\"'+e.note+'\"' : t(this.props.translations, \"ohne_worte\", this.props.locale)}\n        </Note>\n        <Link onClick={()=>{this.props.setUserFilter([e.user_id])}}>{t(this.props.translations, \"zur_bio\", this.props.locale)}</Link>\n        {this.props.entries.length > 1 &&\n          <NextLink largeScreen={this.props.largeScreen} onClick={(e)=>{e.stopPropagation(); this.nextEntry();}}>{t(this.props.translations, \"next_entry\", this.props.locale)}</NextLink>}\n        \n      </Entry>\n    );  \n    \n    return (\n      <InfoWindowContainer largeScreen={this.props.largeScreen}>{entries[this.state.entryIndex]}</InfoWindowContainer>\n    )\n  }\n}\n\nconst Bold = styled.span`\n  font-family: NeutraText;\n`\n\nconst InfoWindowContainer = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  \n  width: ${props => props.largeScreen ? \"50%\" : \"100%\"};\n  \n  background-color: #000;\n  color: #fff;\n  padding: 25px;\n  font-family: NeutraTextDemi;\n  font-size: 1.2rem;\n  max-height: 100%;\n  overflow-y: scroll;\n  z-index: 200;\n`\n\nconst CloseButton = styled.img`\n  position: absolute;\n  right: 20px;\n  top: 20px;\n  width: 20px;\n  height: 20px;\n  :hover {\n    cursor: pointer;\n  };\n` \n\nconst Entry = styled.div`\n`\n\nconst PageNum = styled.p`\n  margin-bottom: 0.5rem;\n`\n\nconst Note = styled.div`\n  font-family: NeutraTextLightItalic;\n  font-size: 1.7rem;\n  margin-bottom: 0.5rem;\n  margin-top: 0.5rem;\n`\n\nconst Link = styled.span`\n  display: block;\n  font-size: 1rem;\n  :hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`\n\nconst NextLink = styled.span`\n  margin-top: 1rem;\n  margin-bottom: ${props => props.largeScreen ? \"0rem\" : \"1rem\"};\n  float: right;\n  font-size: 1rem;\n  display: block;\n  :hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`\n\nconst MusicianLink = styled.span`\n  font-family: NeutraText;\n  :hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`\n\n\nconst mapStyles = require('./GoogleMapStyles.json')\nconst google = window.google;\nconst MarkerClusterer = window.MarkerClusterer;\n\nclass MapComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.mapContainerRef = React.createRef();\n    this.infoWindowRef = React.createRef();\n    this.markers = [];\n    this.lines = [];\n    this.fetchData = this.fetchData.bind(this);\n    this.drawMap = this.drawMap.bind(this);\n  } \n\n  fetchData() {\n    let params = {}\n\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    if(this.props.yearFilter) {\n      params.year = this.props.yearFilter;\n    }\n\n    axios.get(apiUrl + \"/map_entries/\", {params})\n      .then((response)=> {\n        console.log(response);\n        this.setState({ entries: response.data}, this.drawMap);\n    })\n      .catch((e)=> {\n        console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n\n    this.map = new google.maps.Map(this.mapContainerRef.current, {\n      zoom:4,\n      center: {lat: 0, lng: 0},\n      streetViewControl: false, \n      fullscreenControl: false, \n      mapTypeControl: false,\n      maxZoom: 10,\n      zoomControl: false,\n      styles: mapStyles, // change default map styles\n      backgroundColor: 'hsla(0, 0%, 0%, 0)',\n    });\n\n  }\n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter || \n      this.props.userFilter !== prevProps.userFilter ||\n      this.props.yearFilter !== prevProps.yearFilter) {\n      console.log(\"componentDidUpdate\");\n      if(this.markerCluster)\n          this.markerCluster.clearMarkers();\n      this.markers.forEach(m=>{\n        m.setMap(null);\n      });\n      this.markers = [];\n      this.entries = [];\n      this.fetchData();\n    }\n  }\n\n  drawMap() {\n\n      let filterMode = (this.props.musicianFilter ||Â (this.props.userFilter && this.props.userFilter.length > 0) || this.props.yearFilter);\n    \n      const icon = {\n        url: \"/images/marker.svg\", // url\n        scaledSize: {height: 30, width: 30}, // scaled size\n        origin: {x:0, y:0}, // origin\n        anchor: {x:12.5, y:12.5} // anchor\n      };\n\n      const iconResized = (size) => {\n        const base = 15\n        const scaled = base * size\n        return {\n        ...icon,\n        labelOrigin: new google.maps.Point(12.5, scaled + 10),\n        scaledSize: { \n          height: scaled,\n          width: scaled\n        },\n        anchor: {\n          x: scaled/2, \n          y:scaled/2\n        },\n        \n      }}\n\n      var latlngbounds = new window.google.maps.LatLngBounds();\n\n      Object.keys(this.state.entries).forEach((k)=>{      \n\n        let firstEntry = this.state.entries[k][0];\n\n        // check if there is already a marker at this location for example multiple spellings of same place!\n        let duplicateLocation = false;\n        let duplicateMarker = null;\n        this.markers.forEach((m, index2)=>{\n          if(firstEntry.cityLocation.lat == m.position.lat() && \n            firstEntry.cityLocation.lng == m.position.lng()) {\n            m.entries = m.entries.concat(this.state.entries[k])\n            duplicateLocation = true;\n            m.setIcon(iconResized(makeMarkerSize(m.entries.length)));\n            console.log(\"duplicateLocation\");\n          }\n        })\n\n        // add markers for user\n        const musicians = this.state.entries[k]\n          .map( e => capitalize(e.musician) )\n          .join(\", \")\n        const amount = this.state.entries[k].length\n\n        if(!duplicateLocation) {\n          let marker = new google.maps.Marker({\n              position: firstEntry.cityLocation,\n              icon: iconResized(makeMarkerSize(amount)),\n              label: filterMode ? {\n                color: \"#000\",\n                fontSize: \"1rem\",\n                fontFamily: \"NeutraTextDemi\",\n                text: musicians,\n              } : undefined,\n              //map: this.map,\n          }) \n\n          marker.entries = this.state.entries[k];\n          marker.addListener('click', ()=> {\n            this.props.setInfoWindow(marker.entries);\n          });\n\n          this.markers.push(marker)\n          latlngbounds.extend(firstEntry.cityLocation);\n        }        \n      })\n\n      this.map.fitBounds(latlngbounds);\n\n      let listener = google.maps.event.addListener(this.map, \"idle\", (e)=> {\n        google.maps.event.removeListener(listener);\n\n        console.log(\"filterOn\", this.props.filterOn);\n        if(!this.props.filterOn) {\n          this.markerCluster = new MarkerClusterer(this.map, this.markers,\n          {\n            gridSize: 60,\n            minimumClusterSize: 2,\n            styles: \n                  [{\n                    fontFamily: 'NeutraTextDemi',\n                    textColor: 'white',\n                    textSize: 16,\n                    url: '/images/star_group.svg',\n                    height: 50,\n                    width: 50\n                  }]\n          });\n        } else {\n          this.markers.forEach(m=>{\n            m.setMap(this.map);\n          })\n        }\n\n        google.maps.event.addListener(this.map, \"click\", (e)=> {\n          this.props.setInfoWindow(null);\n        });\n          \n        this.lines.forEach(l=>l.setMap(null));\n        this.lines = [];\n        \n        if(filterMode) {\n          \n          let paths = {};\n          \n          // gather path data\n          Object.keys(this.state.entries).forEach(k=>{      \n            this.state.entries[k].forEach(e=>{\n\n              if(!paths[e.user_id]) {\n                paths[e.user_id] = [];\n              }\n              paths[e.user_id].push({\n                location: e.cityLocation,\n                year: e.year\n              });\n            })\n          });\n\n          console.log(paths);\n\n          // sort entries by year and assemble polylines\n          Object.keys(paths).forEach(k=>{\n            let p = paths[k];\n            p.sort((a, b)=>{return b.year-a.year});\n            let locationPath = p.map(l=>{return {lat: l.location.lat, lng: l.location.lng}});\n            this.lines.push(\n              new google.maps.Polyline({\n                path: locationPath,\n                //geodesic: true,\n                strokeColor: '#000',\n                strokeOpacity: 0.5,\n                strokeWeight: 1\n              })\n            )\n          });\n\n          this.lines.forEach(l=>l.setMap(this.map));\n        }\n\n      });  \n  }\n\n  render() {\n    return (\n      [<MapContainer ref={this.mapContainerRef} />,\n        <InfoWindowPlacer>{this.props.showInfoWindow && <InfoWindow \n          entries={this.props.showInfoWindow} \n          setUserFilter={this.props.setUserFilter}\n          translations={this.props.translations}\n          locale={this.props.locale}\n          close={()=>this.props.setInfoWindow(null)}\n          largeScreen={this.props.largeScreen}\n          setMusicianFilter={this.props.setMusicianFilter}\n          />\n        }\n        </InfoWindowPlacer>\n      ]\n    )\n  }\n}\n\nexport default MapComponent;\n\nconst MapContainer = styled.div`\n  width: 100%; \n  height: 100%;\n  /*background-image: url(\"/images/background5.png\");\n  background-size: cover;*/\n  visibility: ${props => props.visible != false ? \"visible\" : \"hidden\"};\n`\n\nconst InfoWindowPlacer = styled.div`\n  \n\n`\n\n","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport { t, capitalize } from '../helpers'\n\nimport styled from 'styled-components'\n\nimport MapComponent from './MapComponent.js';\n\nclass ListPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        entries: []\n    }\n  }\n\n  async componentDidMount() {\n    window.location.hash = this.props.mcmmId;\n\n    axios.get(apiUrl + \"/entry_by_user/\" + this.props.mcmmId + \"/\")\n    .then((response)=> {\n      this.setState({ entries: response.data.docs})    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  render() {\n\n                \n    const entries = this.state.entries.map((e, i)=>\n      <ListItem key={i}>\n        <EditLink onClick={()=>{this.props.editEntry(e)}}>\n          {e.year}, {capitalize(e.musician)} in {capitalize(e.city)} \n        </EditLink>\n      </ListItem>);\n    return (\n      <Container>\n        <List>{entries}</List>\n\n        <p><NewEntryButton onClick={()=>this.props.navigate(\"edit\")}>{t(this.props.translations, \"new_entry\", this.props.locale)}</NewEntryButton></p>\n            \n\n        <p>{t(this.props.translations, \"edit_link_info_1\", this.props.locale)}<br/><SecretLink href={\"#\"+this.props.mcmmId}>{window.location.href}</SecretLink></p>\n        <p>{t(this.props.translations, \"edit_link_info_2\", this.props.locale)}</p>\n      \n        <ShowMyEntriesButton onClick={()=>{this.props.setUserFilter([this.props.mcmmId])}}>\n          {t(this.props.translations, \"show_my_entries\", this.props.locale)}\n        </ShowMyEntriesButton>\n      </Container>\n    );\n  }\n}\n\nexport default ListPage;\n\nconst ShowMyEntriesButton = styled.div`\n  font-family: NeutraTextDemi;\n  margin-top: 1rem;\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`\n\nconst NewEntryButton = styled.div`\n  font-family: NeutraTextDemi;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`\n\nconst Container = styled.div`\n  padding: 1.25rem;\n  font-family: NeutraTextDemi;\n`\n\nconst EditLink = styled.span`\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  };\n`\n\nconst SecretLink = styled.a`\n  color: #000;\n  text-decoration: none;\n  :visited {\n    color: #000;\n  };\n  :hover {\n    text-decoration: underline;\n  };\n`\n\nconst List = styled.ul`\n  padding-left: 0px;\n  font-size: 1.25rem;\n  margin-bottom: 1.25rem;\n`\nconst ListItem = styled.li`\n  list-style: none;\n  margin-bottom: 0.3125rem;\n  border-bottom: 1px dashed black;\n  padding-bottom: 0.3125rem;\n  font-family: NeutraText;\n\n`\n\nconst Dot = styled.span`\n  display: inline-block;\n  background-image: url(/images/dot.png);\n  width: 20px;\n  height: 20px;\n  background-repeat: no-repeat;\n  background-size: contain;\n  color: #fff;\n  font-size: 12px;\n  text-align: center;\n  line-height: 20px;\n`","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\n\nimport { apiUrl, yearsRange } from '../helpers'\nimport axios from 'axios';\nimport { makeMarkerSize } from '../helpers/index';\n\nexport default class LineGraph extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    }\n\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  fetchData() {\n\n    let params = {}\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.yearFilter) {\n      params.year = this.props.yearFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    \n    axios.get(apiUrl + \"/year_data/\", {params})\n    .then((response)=> {\n      //console.log(\"yearly data loaded\")\n      this.setState({\n        data: response.data\n      });\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter \n      || this.props.userFilter !== prevProps.userFilter\n      || this.props.yearFilter !== prevProps.yearFilter\n\n      ) {\n      this.fetchData();\n    }\n  }\n\n  renderYear(year, amount) {\n    return <li key={year}>\n      <span className=\"year_top\">\n        { amount > 0 ? \n          <img style={{transform: \"translateX(-50%) scale(\"+makeMarkerSize(amount)+\")\"}} alt={year} src=\"/images/marker.svg\" /> \n        : null }\n      </span>\n      <span className=\"year_middle\"></span>\n      <span className=\"year_bottom\">\n        <YearButton onClick={()=>{this.props.setYearFilter(year)}}>\n          { amount > 0 ? year : null }\n        </YearButton>  \n      </span>\n    </li>\n  }\n\n  render() {\n    let data = this.state.data\n    if (!data || data.length === 0) return null\n\n    // prepend some years at the beginning\n    const prependAmount = data[0].year - yearsRange.start\n      if (prependAmount > 0) {\n      data.unshift(...Array.from(Array(prependAmount), (e,i)=>({\n        year:i+(data[0].year-prependAmount), \n        amount:0\n      })))\n    }\n\n    // append some years at the end\n    const appendAmount = yearsRange.end - data[data.length-1].year\n    if (appendAmount > 0) {\n      //console.log(appendAmount, data)\n      data.push(...Array.from(Array(appendAmount), (e,i)=>({\n        year:i+(data[data.length-1].year + appendAmount), \n        amount:0\n      })))\n    }\n\n    const startYear = data[0].year\n        \n    const listEntries = data.map( d => this.renderYear(d.year, d.amount) )\n\n    return <Ol start={startYear}>\n        {listEntries}\n    </Ol>;\n  }\n}\n\nconst YearButton = styled.span`\n  :hover { \n    cursor: pointer \n    text-decoration: underline;\n  };\n`\n\nconst Ol = styled.ol`\n  position: fixed;\n  bottom:0;\n  left:0;\n  right: 0;\n  padding: 1rem;\n  box-sizing: border-box;\n  line-height: 1;\n\n  display: flex;\n  width: 100%;\n\n  li {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: 6em;\n  }\n\n  li .year_top {\n    height: 3vh;\n    /* background: red; */\n  }\n\n  li .year_top img {\n    left: 50%;\n    width: auto;\n    height: 1vh;\n    transform-origin: center 67%;\n    \n    /* background: yellow; */\n  }\n\n  li .year_middle {\n    height: 3vh;\n  }\n\n  li .year_middle:before {\n    content: \"\";\n    border: solid 1px black;\n    border-width: 0 0 0 1px;\n    position: relative;\n    left: calc(50% - 1px);\n  }\n\n  li .year_bottom {\n    height: 3vh;\n    /* background: green; */\n  }\n\n  li .year_bottom span {\n    width: calc(1em + 20%);\n    transform: rotate(-90deg) translateX(-100%);\n    overflow: visible;\n    /* background: red; */\n  }\n\n  li > * {\n    position: relative;\n  }\n\n  li > * > * {\n    position: absolute;\n  }\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport { capitalize } from '../helpers'\nimport styled from 'styled-components'\n\nclass TopMusiciansList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      musicians: []\n    }\n\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData() {\n    //console.log(this.props);\n    let params = {}\n\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    if(this.props.yearFilter) {\n      params.year = this.props.yearFilter;\n    }\n\n    axios.get(apiUrl + \"/top_musicians/10/\", {params})\n    .then((response)=> {\n      //console.log(response.data);\n      this.setState({ musicians: response.data })    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }  \n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter || \n        this.props.userFilter !== prevProps.userFilter ||\n        this.props.yearFilter !== prevProps.yearFilter) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n\n    const entries = this.state.musicians\n      .sort((a, b) => (a.percent < b.percent) ? 1 : -1)\n      .map((e, i)=> \n        <li key={i} onClick={ () => this.props.setMusicianFilter(e.name) }>\n          <span>{e.percent}%</span>\n          <span>{capitalize(e.name)}&nbsp;({e.count})</span>\n        </li>)\n\n    return (\n      <Container filterOn={this.props.filterOn}>\n        <ul>{entries}</ul>\n      </Container>\n    );\n  }\n}\n\nexport default TopMusiciansList;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 0;\n  top: ${props => props.filterOn ? \"60px\" : \"0\" };\n  width: auto;\n  padding: 1rem 1rem 0 0;\n  box-sizing: border-box;\n\n  ul {\n    list-style-type: none;\n  } ;\n  li {\n    display: flex;\n    span:first-child {\n      width: 2em;\n      margin-right: 0.75em;\n    }\n    span:last-child {\n      flex: 1;\n      &:hover {\n        cursor: pointer;\n        text-decoration: underline;\n      }\n    }\n  }\n`\n\nconst Clear = styled.span`\n  &:hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`","import React, { Component } from 'react';\nimport styled from 'styled-components'\n\nimport LineGraph from './LineGraph.js';\nimport MapComponent from './MapComponent.js';\nimport TopMusiciansList from './TopMusiciansList.js';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n  }\n  \n  render() {\n    const showFilterBar = (this.props.userFilter.length > 0 || this.props.musicianFilter || this.props.yearFilter)\n\n    return (\n      <Container>\n        <MapComponent \n          userFilter={this.props.userFilter} \n          setUserFilter={this.props.setUserFilter}\n          musicianFilter={this.props.musicianFilter}\n          yearFilter={this.props.yearFilter}\n          translations={this.props.translations}\n          locale={this.props.locale}\n          largeScreen={this.props.largeScreen}\n          setInfoWindow={this.props.setInfoWindow}\n          showInfoWindow={this.props.showInfoWindow}\n          setMusicianFilter={this.props.setMusicianFilter}\n          filterOn={showFilterBar}\n        />\n        \n        { this.props.largeScreen &&\n          <TopMusiciansList \n            musicianFilter={this.props.musicianFilter}\n            userFilter={this.props.userFilter}\n            setMusicianFilter={this.props.setMusicianFilter}\n            yearFilter={this.props.yearFilter}\n            filterOn={showFilterBar}\n          />\n        }\n\n        { this.props.largeScreen &&\n          <LineGraph \n            musicianFilter={this.props.musicianFilter}\n            yearFilter={this.props.yearFilter}\n            setYearFilter={this.props.setYearFilter}\n            userFilter={this.props.userFilter}\n          />\n        }\n        \n      </Container>\n    );\n  }\n}\n\nexport default HomePage;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl, yearsRange } from '../helpers'\nimport { t, capitalize } from '../helpers'\n\nimport ReactAutocomplete from 'react-autocomplete';\n\nimport styled from 'styled-components'\n\nclass EditPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      musician: this.props.entry ? this.props.entry.musician : \"\",\n      city: this.props.entry ? this.props.entry.city : \"\",\n      year: this.props.entry ? this.props.entry.year : \"\",\n      note: this.props.entry ? this.props.entry.note : \"\",\n      _id: this.props.entry ? this.props.entry._id : null,\n      musicians: [],\n      cities: [],\n      changed: false,\n      processing: false,\n    }\n  }\n\n  async componentDidMount() {\n    axios.get(apiUrl + \"/entry_uniques/\")\n    .then((response)=> {\n      console.log(response);\n      this.setState({musicians: response.data.musicians})    \n      this.setState({cities: response.data.cities})    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  handleSubmit = (event)=> {\n    if(!this.state.musician ||Â !this.state.city || !this.state.year) return;\n    console.log(this.state);\n    this.setState({processing: true});\n\n    if(!this.state._id) {\n      axios.post(apiUrl + '/entry', {\n        musician: this.state.musician, \n        city: this.state.city,\n        year: parseInt(this.state.year),\n        note: this.state.note,\n        user_id: this.props.mcmmId\n      })\n      .then((response)=> {\n        console.log(response);\n        this.setState({_id: response.data._id, changed: false, processing: false})\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n    \n    } else {\n\n      axios.put(apiUrl + '/entry/' + this.state._id, {\n        musician: this.state.musician, \n        city: this.state.city,\n        year: parseInt(this.state.year),\n        note: this.state.note,\n        user_id: this.props.mcmmId\n      })\n      .then((response)=> {\n        console.log(response);\n        this.setState({_id: response.data._id, changed: false, processing: false})\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n\n    }\n  }\n\n  handleDelete = () => {\n\n    if(window.confirm(\"really?\")) {\n        this.setState({processing: true});\n        axios.delete(apiUrl + '/entry/' + this.state._id, {        \n      })\n      .then((response)=> {\n        console.log(response);\n        this.props.back();\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n\n    }\n\n  }\n\n  handleInputChange = (event)=> {\n    const target = event.target;\n    const name = target.name;\n    const value = name !== \"year\" || (name === \"year\" && !isNaN(target.value)) ? target.value : this.state.year;\n\n    this.setState({\n      [name]: value,\n      changed: true\n    });\n  }\n\n  fixYear = year => {\n    const yearMax = yearsRange.end\n    const yearMin = yearsRange.start\n    if ( year < yearMin && year !== \"\") year = yearMin\n    if ( year > yearMax) year = yearMax\n    return year\n  }\n\n  render() {\n    return (\n      <Container>\n        <Form>\n          \n          <Label>{t(this.props.translations, \"note_prompt\", this.props.locale)}</Label>\n          <textarea name=\"note\" maxlength=\"200\" value={this.state.note} onChange={this.handleInputChange}/>\n          <br/>\n          \n          <Label>{t(this.props.translations, \"musician_prompt\", this.props.locale)}</Label> \n          \n          <ReactAutocomplete\n            items={this.state.musicians.map((m)=>{return {value: capitalize(m)}})}\n            getItemValue={item => item.value}\n            shouldItemRender={(item, value) => item.value.toLowerCase().indexOf(value.toLowerCase()) > -1}\n            renderItem={(item, highlighted) =>\n              <div\n                key={item.value}\n                style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\n              >\n                {item.value}\n              </div>\n            }\n            value={capitalize(this.state.musician)}\n            onChange={(e) => this.setState({musician: e.target.value, changed: true})}\n            onSelect={(val) => this.setState({musician: val, changed: true})}\n            wrapperStyle={{display: \"block\"}}\n            menuStyle={menuStyle}\n            inputProps={{style: autocompleteInputStyle}}\n          />\n\n          <br/>\n          <Label>{t(this.props.translations, \"city_prompt\", this.props.locale)}</Label> \n          \n          <ReactAutocomplete\n            items={this.state.cities.map((c)=>{return {value: capitalize(c)}})}\n            getItemValue={item => item.value}\n            shouldItemRender={(item, value) => item.value.toLowerCase().indexOf(value.toLowerCase()) > -1}\n            renderItem={(item, highlighted) =>\n              <div\n                key={item.value}\n                style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\n              >\n                {item.value}\n              </div>\n            }\n            value={capitalize(this.state.city)}\n            onChange={(e) => this.setState({city: e.target.value, changed: true})}\n            onSelect={(val) => this.setState({city: val, changed: true})}\n            wrapperStyle={{display: \"block\", opacity: 1}}\n            menuStyle={menuStyle}\n            inputProps={{style: autocompleteInputStyle}}\n          />\n\n          <br/>\n          <Label>{t(this.props.translations, \"year_prompt\", this.props.locale)}</Label>\n          <input \n            autoComplete=\"off\" \n            size=\"4\" \n            maxLength=\"4\" \n            type=\"text\" \n            name=\"year\" \n            value={this.state.year} \n            onChange={this.handleInputChange} \n            onBlur={() => this.setState({year:this.fixYear(this.state.year)})} \n          />\n          <br/>\n          {!this.state.processing ? <div>\n            {this.state.changed && <Button onClick={this.handleSubmit}>{t(this.props.translations, \"save_entry\", this.props.locale)}</Button>}\n            {this.state._id && <Button onClick={this.handleDelete}>{t(this.props.translations, \"delete_entry\", this.props.locale)}</Button>}\n            </div>\n          : <span>{t(this.props.translations, \"...\", this.props.locale)}</span>}\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default EditPage;\n\nconst Container = styled.div`\n  padding: 1.25rem;\n`\n\nconst Label = styled.label`\n  display: inline-block;\n  width: 100%;\n  margin-top: 10px;\n  margin-bottom: 5px;\n`\n\nconst autocompleteInputStyle = {};\n\nconst menuStyle = {\n  borderRadius: '3px',\n  boxShadow: '0 2px 12px rgba(0, 0, 0, 0.1)',\n  background: 'rgba(255, 255, 255, 0.9)',\n  padding: '2px 0',\n  fontSize: '100%',\n  position: 'fixed',\n  overflow: 'auto',\n  //maxHeight: '50%', // TODO: don't cheat, let it flow to the bottom\n  maxHeight: \"75px\"\n}\n\nconst Form = styled.form`\n  input, textarea {\n    display: block;\n    border:none;\n    width: 100%;\n    background-color: black;\n    color: white;\n    outline: none;\n    box-sizing: border-box;\n    padding: 0.5rem;\n  }\n\n  input {\n    font-size: 200%;\n    text-align: left;\n    height: 2em;\n    &[name=\"year\"] {\n      width: auto;\n    }\n  }\n\n  textarea {\n    height: 100px;\n    font-size: 150%;\n    font-family: NeutraTextLightItalic;\n  }\n\n  margin-bottom: 2rem;\n`\nconst Button = styled.div`\n  width: 100%;\n  margin-top: 20px;\n  :hover {cursor: pointer};\n  text-align: center;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport styled from 'styled-components'\n\nimport QrReader from 'react-qr-reader'\nvar QRCode = require('qrcode.react');\n\nclass ScanPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        result: 'Scanning...'\n    }\n  }\n\n  componentDidMount() {\n    this.pollInterval = setInterval(()=>{this.props.pollFilter(this.props.mcmmId)}, 5000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.pollInterval);\n  }\n\n  handleScan = data => {\n    if (data) {\n      this.setState({\n        result: data\n      })\n\n      if (data.substring(0, 4) == \"pro_\") {\n        this.props.setUserFilter([this.props.mcmmId]);\n      } else {\n        this.props.setUserFilter([this.props.mcmmId, data]);\n      }\n\n      axios.get(apiUrl + \"/set_filter/\" + data + \"/\" + this.props.mcmmId)\n      .then((response)=> {\n        console.log(response);\n      })\n      .catch((e)=> {\n        console.log(e);\n      });\n    }\n  }\n  \n  handleError = err => {\n    console.error(err)\n  }\n\n  render() {\n                \n    return (\n      <Container>\n\n          <Qode>\n            <QRCode \n              value={this.props.mcmmId}\n              size={500}\n            />\n          </Qode>\n\n          <Scanner>\n            <QrReader\n              delay={300}\n              onError={this.handleError}\n              onScan={this.handleScan}\n            />\n            <p>{this.state.result}</p>\n          </Scanner>\n\n\n      </Container>\n    );\n  }\n}\n\nexport default ScanPage;\n\nconst menuHeight = \"4rem\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - ${menuHeight});\n  align-items: center;\n  background-color: black;\n`\n\nconst Qode = styled.div`\n  flex: 1;\n  max-width:calc(50vh - 0.5 * ${menuHeight});\n  width: 100vw;  \n  padding: 2.5rem;\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  background-color: white;\n  border: 1px solid black;\n\n  canvas {\n    width:100% !important;\n    height: auto !important;\n  }\n\n`\n\nconst Scanner = styled.div`\n  height: calc(((100vh - ${menuHeight}) / 100vh) * 100vw);\n  max-width:calc(50vh - 0.5 * ${menuHeight});\n  max-height:calc(50vh - 0.5 * ${menuHeight});\n  width: 100vw;\n  position: relative;\n  background-color: black;\n  border: 1px solid white;\n\n  > p {\n    position: absolute;\n    width: 100%;\n    color: white;\n    bottom: 0.5rem;\n    opacity: 0.5;\n    z-index: 10;\n    text-align: center;\n  }\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\nimport { t } from '../helpers'\n\nimport styled from 'styled-components'\n\nclass StaticPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n    }\n  }\n\n  render() {\n                \n    return (\n      <StaticContainer>\n\n        <div \n          dangerouslySetInnerHTML={{__html: t(this.props.translations, this.props.pageKey + \"_content\", this.props.locale)}}\n        />\n\n      </StaticContainer>\n    );\n  }\n}\n\nexport default StaticPage;\n\nconst StaticContainer = styled.div`\n  padding: 1.25rem;\n  font-family: NeutraTextDemi;\n  p {\n    margin-bottom: 1rem;\n  }\n  h2 {\n    font-family: NeutraText;\n    margin-bottom: 1rem;\n  }\n  a {\n    color: #000;\n    :visited {\n      color: #000;\n    }\n    text-decoration: none;\n    :hover {\n      text-decoration: underline;\n    }\n  }\n`","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nclass Circles extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n\n  render() {\n    let circles = [];\n    let step = 7;\n    for(let i = 0; i < 200; i ++) {\n      circles.push(\n        <circle cx=\"66%\" cy=\"-100\" r={i * step} stroke=\"#ddd\" strokeWidth=\"1\" fill=\"none\" />\n      )\n    }\n\n    /*\n    for(let i = 0; i < 200; i ++) {\n      circles.push(\n        <circle cx=\"20%\" cy=\"100%\" r={i * step * 1.1} stroke=\"#ddd\" strokeWidth=\"1\" fill=\"none\" />\n      )\n    }\n    */\n\n    return (\n       <svg style={{position: \"absolute\"}} height=\"100%\" width=\"100%\">\n        {circles}\n      </svg> \n    )\n  }\n}\n\nexport default Circles;\n","import React, { Component } from 'react';\nimport \"css-reset-and-normalize\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\nimport ReactResizeDetector from 'react-resize-detector';\n\nimport Menu from './Menu.js';\nimport ListPage from './ListPage.js';\nimport HomePage from './HomePage.js';\nimport EditPage from './EditPage.js';\nimport ScanPage from './ScanPage.js';\nimport StaticPage from './StaticPage.js';\nimport InfoBar from './InfoBar.js';\nimport Circles from './Circles.js';\n\nimport axios from 'axios';\nimport { apiUrl, capitalize, t } from '../helpers'\n\nimport { isLargeScreen } from '../helpers/'\nimport styled from 'styled-components'\nconst uuidv1 = require('uuid/v1');\n\nclass BaseContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      examples: [],\n      menuOpen: false,\n      currentPage: \"home\",\n      mcmmId: null,\n      navStack: [],\n      userFilter: [],\n      musicianFilter: null,\n      yearFilter: null,\n      showInfoWindow: null,\n      translations: [],\n      locale: \"de\",\n      projectionId: null\n    }\n\n    this.setUserFilter = this.setUserFilter.bind(this);\n    this.setMusicianFilter = this.setMusicianFilter.bind(this);\n    this.setYearFilter = this.setYearFilter.bind(this);\n    this.setLocale = this.setLocale.bind(this);\n    this.pollFilter = this.pollFilter.bind(this);\n    this.handleFilterClose = this.handleFilterClose.bind(this);\n    this.setInfoWindow = this.setInfoWindow.bind(this);\n\n  }\n\n  onResize = (width, height) => {\n    this.setState({\n      largeScreen: isLargeScreen(width, height),\n    })\n  }  \n\n  setLocale = (l)=> {\n    this.setState({locale: l})\n  }\n\n  setUserFilter(filter) {\n    this.setState({\n      userFilter: filter,\n      musicianFilter: null,\n      yearFilter: null,\n      showInfoWindow: null\n    }, ()=>{\n      if(this.state.currentPage != \"home\") {\n        this.navigate(\"home\");  \n      }\n    });\n  }\n\n  setMusicianFilter(musician) {\n    console.log(\"setMusicianFilter\", musician);\n    this.setState({\n      musicianFilter: musician,\n      userFilter: [],\n      yearFilter: null,\n      showInfoWindow: null\n    })\n  }\n\n  setYearFilter(year) {\n    this.setState({\n      musicianFilter: null,\n      userFilter: [],\n      yearFilter: year,\n      showInfoWindow: null\n    })\n  }\n\n  setInfoWindow(entries) {\n    this.setState({showInfoWindow: entries});\n  }\n\n  pollFilter(id) {\n    axios.get(apiUrl + \"/filter?username=\" + id)\n    .then((response)=> {\n      console.log(response);\n      if(response.data && response.data.docs && response.data.docs.length) {\n        let ids = this.state.projectionId ? [] : [id];\n        response.data.docs[0].filter.forEach(filterId=>{ids.push(filterId)});\n        this.setUserFilter(ids);  \n      }\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  handleFilterClose() {\n\n    console.log(\"handleFilterClose\");\n\n    axios.get(apiUrl + \"/remove_filter/\" + (this.state.projectionId ? this.state.projectionId : this.state.mcmmId))\n    .then((response)=> {\n      console.log(response);\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n\n    this.setUserFilter([]);\n    this.setMusicianFilter(null);\n    this.setYearFilter(null);\n  }\n\n\n  async componentDidMount() {\n\n    let response = await axios.get(apiUrl + \"/translation\");\n    //console.log(response);\n    this.setState({translations: response.data.docs});\n\n    let projection_id = null;\n    if(URLSearchParams) {\n      let queryParams = new URLSearchParams(window.location.search); \n      projection_id = queryParams.get(\"projection_id\");\n    }\n    \n    if(projection_id) {\n\n      this.setState({\n        projectionId: projection_id\n      });\n\n      // start polling for filter\n      this.pollInterval = setInterval(()=>{this.pollFilter(projection_id)}, 5000);\n      \n    } else {\n\n      let hash = window.location.hash;\n      let mcmmId = localStorage.getItem('mcmmId');  \n      if(hash) {\n        mcmmId = hash.substr(1);\n        this.setState({\n          currentPage: \"list\",\n          mcmmId: mcmmId,\n          menuOpen: true,\n          navStack: [\"home\"]\n        })\n      }\n      if(!mcmmId) {\n        mcmmId = uuidv1();\n      }\n      this.setState({mcmmId: mcmmId});  \n      localStorage.setItem('mcmmId', mcmmId);    \n  \n    }\n\n    disableBodyScroll(document.querySelector('body'))\n  \n  }\n\n  componentWillUnmount() {\n    clearInterval(this.pollInterval);\n  }\n\n  toggleMenu = ()=>{\n    if (this.state.menuOpen) {\n      if(this.state.currentPage == \"edit\") {\n        this.back();\n        return;\n      }\n\n      this.navigate(\"home\")\n    }\n    this.setState({menuOpen: !this.state.menuOpen})\n  }\n\n  navigate = (page, entry, noSave=false)=>{\n    if(!noSave) {\n      let navStack = this.state.navStack;\n      navStack.push(this.state.currentPage);\n      //console.log(navStack);\n      this.setState({navStack});\n    }\n    this.setState({\n      menuOpen: page !== \"home\",\n      currentPage: page,\n      currentEntry: entry,\n      pageKey: entry,\n      showInfoWindow: null\n    });\n    if(page != \"list\") {\n      let pathName = window.location.pathname + (this.state.projectionId ? \"?projection_id=\" + this.state.projectionId : \"\")\n      window.history.pushState(\"\", document.title, pathName);\n    }\n  }\n\n  reset = () => {\n    this.setUserFilter([]);\n    this.navigate(\"home\");\n  }\n\n  back = () => {\n    if(this.state.currentPage == \"scan\") {\n      this.navigate(\"home\");\n      return;\n    }\n\n    let navStack = this.state.navStack;\n    let previousPage = navStack.pop();\n    this.setState({navStack});\n    this.navigate(previousPage, this.state.entry, true);\n  }\n\n  render() {\n    const showFilterBar = (this.state.userFilter.length > 0 || this.state.musicianFilter || this.state.yearFilter)\n\n    const pages = {\n      \"home\": <HomePage mcmmId={this.state.mcmmId} \n        userFilter={this.state.userFilter} \n        setUserFilter={this.setUserFilter}\n        musicianFilter={this.state.musicianFilter}\n        setMusicianFilter={this.setMusicianFilter}\n        yearFilter={this.state.yearFilter}\n        setYearFilter={this.setYearFilter}\n        largeScreen={this.state.largeScreen}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        setInfoWindow={this.setInfoWindow}\n        showInfoWindow={this.state.showInfoWindow}\n        />,\n      \"list\": <ListPage \n        mcmmId={this.state.mcmmId} editEntry={(entry)=>{this.navigate(\"edit\", entry)}}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        setUserFilter={this.setUserFilter}\n        titleKey=\"my_entries\"\n        navigate={this.navigate}\n        />,\n      \"edit\": <EditPage \n        mcmmId={this.state.mcmmId} back={this.back} \n        entry={this.state.currentEntry}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        titleKey={this.state.currentEntry ? \"update entry\" : \"new entry\"}\n        />,\n      \"scan\": <ScanPage \n        mcmmId={this.state.mcmmId} setUserFilter={this.setUserFilter}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        pollFilter={this.pollFilter}\n        titleKey=\"scanner\"\n      />,\n      \"page\": <StaticPage\n        translations={this.state.translations}\n        locale={this.state.locale}\n        pageKey={this.state.pageKey}\n        titleKey={this.state.pageKey + \"_heading\"}\n      />  \n    }\n    let mainContent = pages[\"home\"];\n\n    const page = this.state.currentPage !== \"home\" ? pages[this.state.currentPage] : null\n    \n    return (\n      [\n        <GlobalStyles key=\"globalstyles\" />,\n        <ReactResizeDetector key=\"resize\" handleWidth handleHeight onResize={this.onResize} />,\n        <Menu \n          menuOpen={this.state.menuOpen}\n          key=\"menu\" \n          close={this.toggleMenu} \n          navigate={this.navigate}\n          translations={this.state.translations}\n          locale={this.state.locale}\n          setLocale={this.setLocale}\n          reset={this.reset}\n          projectionMode={this.state.projectionId ? true : false}\n          render={page}\n        />, \n        <MainContent key=\"main\">\n          <Circles/>\n          \n          {!showFilterBar && \n            <MenuBar>\n              <MenuButton onClick={this.toggleMenu} src=\"images/menu.png\"/>\n              <MenuText>MATCH CUT</MenuText>\n            </MenuBar>\n          }\n          \n          {showFilterBar && \n            <InfoBar onClose={this.handleFilterClose} menuOpen={this.state.menuOpen}>\n              {(this.state.userFilter.length > 0) && \n                <span>{t(this.state.translations, \"filter_for\", this.state.locale)} \n                &nbsp;{this.state.userFilter.length}&nbsp;\n                {this.state.userFilter.length > 1 ? t(this.state.translations, \"users\", this.state.locale) : t(this.state.translations, \"user\", this.state.locale)}\n              </span>}\n              {(this.state.musicianFilter) && <span>{t(this.state.translations, \"filter_for\", this.state.locale)} {t(this.state.translations, \"users_that_named\", this.state.locale)} {capitalize(this.state.musicianFilter)}</span>}\n              {(this.state.yearFilter) && <span>{t(this.state.translations, \"filter_for\", this.state.locale)} {t(this.state.translations, \"entries_from_year\", this.state.locale)} {this.state.yearFilter}</span>}\n            </InfoBar>\n          }\n\n          {mainContent}\n          {(this.state.currentPage === \"home\" && !showFilterBar || this.state.currentPage == \"list\") && \n            <AddButton onClick={()=>this.navigate(\"edit\")} largeScreen={this.state.largeScreen}>\n              +\n            </AddButton>\n          }\n        </MainContent>\n      ]\n    );\n  }\n}\n\nexport default BaseContainer;\n\nconst MenuBar = styled.div`\n  position: fixed;\n  top:0;\n  z-index: 100;\n  display: flex;\n  padding: 1rem;\n`\n\nconst MenuText = styled.span`\n  font-size: 2.5rem;\n  padding-left: 1rem;\n  letter-spacing: 0.2ex;\n`\n\nconst MenuButton = styled.img`\n  width: auto;\n  height: calc(2 * 1.25rem); // scaling factor for the png image * font-size\n  &:hover {cursor: pointer}; \n`\n\nconst MainContent = styled.div`\n  height: 100%;\n  width: 100%;\n  background: #fff;\n`\n\nconst AddButton = styled.div`\n  position: fixed;\n  z-index: 100;\n  right: 1rem;\n  bottom: ${ props => (props.largeScreen ? \"9rem\" : \"2rem\") };\n  width: 3rem;\n  height: 3rem;\n  font-size: 4rem;\n  line-height: 1.2rem;\n  font-family: NeutraTextLight;\n  text-align: center;\n  border: 2px solid black;\n  border-radius: 50%;\n  background-color: white;\n  padding: 10px;\n  &:hover {cursor: pointer}; \n`\n\nconst GlobalStyles = createGlobalStyle`\n`","import React from 'react';\nimport BaseContainer from './components/BaseContainer.js'\n\nconst App = () => <BaseContainer/>\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}