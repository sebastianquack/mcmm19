{"version":3,"sources":["helpers/index.js","components/InfoBar.js","components/Menu.js","components/MapComponent.js","components/ListPage.js","components/LineGraph.js","components/TopMusiciansList.js","components/HomePage.js","components/EditPage.js","components/ScanPage.js","components/StaticPage.js","components/BaseContainer.js","App.js","serviceWorker.js","index.js"],"names":["apiUrl","isLargeScreen","width","height","t","translations","key","locale","i","length","content","capitalize","s","replace","a","toUpperCase","makeMarkerSize","amount","size","console","log","InfoBar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","react_default","createElement","UserFilterInfo","children","ExitButton","src","onClick","onClose","Component","styled","div","_templateObject","img","_templateObject2","require","LocaleToggle","localeOptions","map","l","LocaleOption","active","setLocale","LocaleContainer","ul","Menu_templateObject","li","Menu_templateObject2","Menu","_this2","_this3","render","title","titleKey","MenuShadow","close","menuOpen","MenuContainer","components_InfoBar","ContentContainer","MenuContent","MenuButton","reset","navigate","projectionMode","Menu_LocaleToggle","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","mapStyles","google","window","MapComponent","mapContainerRef","React","createRef","infoWindowRef","markers","lines","infoWindows","entries","fetchData","bind","assertThisInitialized","drawMap","params","musicianFilter","musician","userFilter","userIds","JSON","stringify","yearFilter","year","axios","get","then","response","setState","data","catch","e","maps","Map","current","zoom","center","lat","lng","streetViewControl","fullscreenControl","mapTypeControl","zoomControl","styles","prevProps","forEach","m","setMap","filterMode","icon","url","scaledSize","origin","x","y","anchor","labelOrigin","Point","iconResized","scaled","objectSpread","latlngbounds","LatLngBounds","keys","k","firstEntry","concat","city","note","user_id","musicians","join","marker","Marker","position","cityLocation","label","color","fontSize","fontFamily","text","undefined","infoWindow","InfoWindow","event","addListener","$","off","click","target","attr","setUserFilter","open","push","extend","paths","location","p","sort","b","locationPath","Polyline","path","strokeColor","strokeOpacity","strokeWeight","fitBounds","getZoom","setZoom","MapContainer","ref","glow","keyframes","MapComponent_templateObject","MapComponent_templateObject2","visible","ListPage","hash","mcmmId","docs","ListItem","EditLink","editEntry","Container","List","NewEntryButton","href","ShowMyEntriesButton","ListPage_templateObject","ListPage_templateObject2","ListPage_templateObject3","span","ListPage_templateObject4","ListPage_templateObject5","ListPage_templateObject6","ListPage_templateObject7","LineGraph","className","style","transform","alt","YearButton","setYearFilter","_this4","unshift","apply","toConsumableArray","Array","from","startYear","listEntries","d","renderYear","Ol","start","PureComponent","LineGraph_templateObject","ol","LineGraph_templateObject2","TopMusiciansList","percent","setMusicianFilter","name","count","TopMusiciansList_Container","filterOn","TopMusiciansList_templateObject","TopMusiciansList_templateObject2","HomePage","showFilterBar","HomePage_Container","components_MapComponent","largeScreen","components_TopMusiciansList","LineGraph_LineGraph","HomePage_templateObject","EditPage","handleSubmit","processing","_id","put","parseInt","changed","error","post","handleDelete","confirm","delete","back","handleInputChange","_this$setState","value","isNaN","defineProperty","fixYear","yearMax","Date","getFullYear","entry","cities","EditPage_Container","Form","Label","Autocomplete_default","items","getItemValue","item","shouldItemRender","toLowerCase","indexOf","renderItem","highlighted","backgroundColor","onChange","onSelect","val","wrapperStyle","display","inputProps","autocompleteInputStyle","c","opacity","autoComplete","maxLength","type","onBlur","maxlength","Button","EditPage_templateObject","EditPage_templateObject2","form","EditPage_templateObject3","EditPage_templateObject4","QRCode","ScanPage","handleScan","result","substring","handleError","err","pollInterval","setInterval","pollFilter","clearInterval","ScanPage_Container","Qode","Scanner","lib_default","delay","onError","onScan","ScanPage_templateObject","ScanPage_templateObject2","ScanPage_templateObject3","StaticPage","StaticContainer","dangerouslySetInnerHTML","__html","pageKey","StaticPage_templateObject","uuidv1","BaseContainer","onResize","toggleMenu","currentPage","page","arguments","navStack","currentEntry","pathName","pathname","projectionId","history","pushState","document","previousPage","pop","examples","handleFilterClose","filter","id","ids","filterId","disableBodyScroll","querySelector","queryParams","URLSearchParams","search","projection_id","localStorage","getItem","substr","setItem","_this5","pages","home","components_HomePage","list","components_ListPage","edit","components_EditPage","scan","components_ScanPage","components_StaticPage","mainContent","GlobalStyles","esm","handleWidth","handleHeight","components_Menu","MainContent","MenuBar","BaseContainer_MenuButton","MenuText","AddButton","BaseContainer_templateObject","BaseContainer_templateObject2","BaseContainer_templateObject3","BaseContainer_templateObject4","BaseContainer_templateObject5","createGlobalStyle","BaseContainer_templateObject6","App","components_BaseContainer","Boolean","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c38cc2e5.chunk.js","sourcesContent":["export const apiUrl = \"/api\"\n\nexport const isLargeScreen = function(width, height) {\n  return width > 600 && height > 400\n}\n\nexport function t(translations, key, locale) {\n  for(let i = 0; i < translations.length; i++) {\n    if(translations[i].key == key) {\n      let content = translations[i][\"content_\" + locale];\n      return content ? content : \"[\"+ key + \"]\";\n    }\n  }\n  return \"[\"+ key + \"]\";\n}\n\nexport function capitalize(s) {\n    return s.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); });\n}\n\nexport function makeMarkerSize(amount) {\n  // get a total amount and return a scale factor between 1 and 5\n  let size = amount * 0.8\n  if (size > 5) size = 5;\n  if (size < 1) size = 1;\n  console.log(size)\n  return size\n}","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nimport { isLargeScreen } from '../helpers/'\n\n\nclass InfoBar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n\n  render() {\n    return (\n      <UserFilterInfo>\n        { this.props.children }\n\n        <ExitButton src=\"/images/close.png\" onClick={this.props.onClose}/>\n      </UserFilterInfo>\n    )\n  }\n}\n\nexport default InfoBar;\n\nconst UserFilterInfo = styled.div`\n  min-height: 60px;\n  padding: 1.25rem;\n  padding-right: calc(30px + 1rem);\n  display: flex;\n  font-size: 1.25rem;\n  width: 100%;\n`\n\nconst ExitButton = styled.img`\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  width: 30px;\n  height: 30px;\n  &:hover {cursor: pointer};\n`\n","import React, { Component } from 'react';\nimport styled from 'styled-components'\n\nimport { t } from '../helpers'\nimport InfoBar from './InfoBar.js'\n\nconst uuidv1 = require('uuid/v1');\n\nclass LocaleToggle extends Component {\n  render () {\n    const localeOptions = [\"en\", \"de\"].map((l)=>\n      <LocaleOption key={l} active={l == this.props.locale} onClick={()=>this.props.setLocale(l)}><span>{l}</span></LocaleOption>\n    )\n    return (\n      <div>\n        <LocaleContainer>\n          {localeOptions}        \n        </LocaleContainer>\n      </div>\n    )\n  }\n}\n\nconst LocaleContainer = styled.ul`\n  margin-left: 0px;\n  padding-left: 0px;\n  margin-top: 40px;\n`\n\nconst LocaleOption = styled.li`\n  text-decoration: none;\n  list-style: none;\n  font-size: 16px;\n  span { \n    font-weight: ${props=>props.active ? \"bold\" : \"default\"}; \n    padding: 5px;\n  }\n  :hover {cursor: ${props=>props.active ? \"default\" : \"pointer\"}};\n  :first-child {:after { content: \"/\" }};\n  display: inline-block;\n`\n\n\nclass Menu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n  render() {\n\n    console.log(this.props.render)\n\n    const title = this.props.render && this.props.render.props.titleKey\n      ? t(this.props.translations, this.props.render.props.titleKey, this.props.locale) \n      : t(this.props.translations, \"menu\", this.props.locale)\n\n    return (\n      [<MenuShadow onClick={this.props.close} menuOpen={this.props.menuOpen}/>,\n      <MenuContainer menuOpen={this.props.menuOpen}>\n\n        <InfoBar onClose={this.props.close}>\n          { title }\n        </InfoBar>\n\n        { this.props.render \n          ? \n            <ContentContainer>\n              {this.props.render}\n            </ContentContainer>\n          :\n            <ContentContainer>\n              <MenuContent>\n                <MenuButton onClick={this.props.reset}>{t(this.props.translations, \"home\", this.props.locale)}</MenuButton>\n                <MenuButton onClick={()=>this.props.navigate(\"page\", \"programm\")}>{t(this.props.translations, \"programm\", this.props.locale)}</MenuButton>\n                {!this.props.projectionMode && <MenuButton onClick={()=>this.props.navigate(\"list\")}>{t(this.props.translations, \"my_entries\", this.props.locale)}</MenuButton>}\n                {!this.props.projectionMode && <MenuButton onClick={()=>this.props.navigate(\"scan\")}>{t(this.props.translations, \"scanner\", this.props.locale)}</MenuButton>}\n                <MenuButton onClick={()=>this.props.navigate(\"page\", \"credits\")}>{t(this.props.translations, \"credits\", this.props.locale)}</MenuButton>\n                \n                <LocaleToggle \n                  locale={this.props.locale} \n                  setLocale={this.props.setLocale}\n                  translations={this.props.translations}\n                />\n              </MenuContent>\n            </ContentContainer>\n        }\n\n      </MenuContainer>]\n    );\n  }\n}\n\nexport default Menu;\n\nconst MenuButton = styled.li`\n  margin-bottom: 0.625rem;\n  &:hover {cursor: pointer};\n`\n\nconst MenuContainer = styled.div`\n  width: 50%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  visibility: ${ props => (props.menuOpen ? \"visibile\" : \"hidden\") };\n  z-index: 300;\n\n  display: flex;\n  flex-direction: column;\n  background-color: white;\n\n  @media only screen and (max-width: 768px) {\n    width: 100%;\n  }\n`\n\nconst MenuShadow = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n  opacity: 0.5;\n  z-index: 300;\n  display: ${ props => (props.menuOpen ? \"block\" : \"none\") };\n`\n\nconst ContentContainer = styled.div`\n  flex:1;\n  padding-top: 0rem; // height of the top bar, ~4rem\n  overflow-y: auto;\n`\n\nconst MenuContent = styled.ul`\n  padding: 1.25rem;\n  font-size: 1.25rem;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport styled, { keyframes } from 'styled-components'\n\nimport { capitalize, makeMarkerSize, t } from '../helpers'\n\nimport $ from 'jquery';\n\nconst mapStyles = require('./GoogleMapStyles.json')\nconst google = window.google;\n\nclass MapComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.mapContainerRef = React.createRef();\n    this.infoWindowRef = React.createRef();\n    this.markers = [];\n    this.lines = [];\n    this.infoWindows = [];\n\n    this.state = {\n      entries: []\n    }\n\n    this.fetchData = this.fetchData.bind(this);\n    this.drawMap = this.drawMap.bind(this);\n  } \n\n  fetchData() {\n    let params = {}\n\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    if(this.props.yearFilter) {\n      params.year = this.props.yearFilter;\n    }\n\n    axios.get(apiUrl + \"/map_entries/\", {params})\n      .then((response)=> {\n        console.log(response);\n        this.setState({ entries: response.data}, this.drawMap);\n    })\n      .catch((e)=> {\n        console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n\n    this.map = new google.maps.Map(this.mapContainerRef.current, {\n      zoom: 1,\n      center: {lat: 0, lng: 0},\n      streetViewControl: false, \n      fullscreenControl: false, \n      mapTypeControl: false,\n      zoomControl: false,\n      styles: mapStyles // change default map styles\n    });\n\n  }\n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter || \n      this.props.userFilter !== prevProps.userFilter ||\n      this.props.yearFilter !== prevProps.yearFilter) {\n      this.markers.forEach(m=>{\n        m.setMap(null);\n      });\n      this.markers = [];\n      this.entries = [];\n      this.fetchData();\n    }\n  }\n\n  drawMap() {\n\n      let filterMode = (this.props.musicianFilter || (this.props.userFilter && this.props.userFilter.length > 0) || this.props.yearFilter);\n    \n      const icon = {\n        url: \"/images/marker.svg\", // url\n        scaledSize: {height: 30, width: 30}, // scaled size\n        origin: {x:0, y:0}, // origin\n        anchor: {x:12.5, y:12.5}, // anchor\n        labelOrigin: new google.maps.Point(12.5, 40)\n      };\n\n      const iconResized = (size) => {\n        const base = 10\n        const scaled = base * size\n        return {\n        ...icon,\n        scaledSize: { \n          height: scaled,\n          width: scaled\n        },\n        anchor: {\n          x: scaled/2, \n          y:scaled/2\n        },\n        \n      }}\n\n      var latlngbounds = new window.google.maps.LatLngBounds();\n\n      Object.keys(this.state.entries).forEach(k=>{      \n\n        let firstEntry = this.state.entries[k][0];\n\n        // assemble content\n        let content = `\n          <div class=\"info-window\">\n          `\n        content += `\n            <span class=\"info-window-city\">\n              ${capitalize(firstEntry.city)}\n            </span>\n          `\n        this.state.entries[k].forEach((e) => {\n          content += `\n            <div class=\"info-window-entry\">\n              <span class=\"info-window-musician\">\n                ${capitalize(e.musician)}\n              </span>\n              <span class=\"info-window-year\">\n                ${e.year}\n              </span>\n              ${(e.note ? `\n                <em class=\"info-window-note\">\n                  ${e.note}\n                </em>` : ''\n                )}\n              <span class='info-window-span' rel='${e.user_id}'>\n                ${t(this.props.translations, \"zur_bio\", this.props.locale)}\n              </span>\n            </div>\n          `\n        });\n        content += `\n          </div>\n          `\n        \n        // add markers for user\n        const musicians = this.state.entries[k]\n          .map( e => capitalize(e.musician) )\n          .join(\", \")\n        const amount = this.state.entries[k].length\n        let marker = new google.maps.Marker({\n            position: firstEntry.cityLocation,\n            icon: iconResized(makeMarkerSize(amount)),\n            label: filterMode ? {\n              color: \"#000\",\n              fontSize: \"1rem\",\n              fontFamily: \"NeutraText\",\n              text: musicians,\n            } : undefined,\n            map: this.map,\n        })\n\n        let infoWindow = new google.maps.InfoWindow({\n          content: content\n        });\n\n        google.maps.event.addListener(infoWindow, 'domready', ()=> {\n          $('.info-window-span').off();\n          $('.info-window-span').click((e)=>{\n            let user_id = $(e.target).attr(\"rel\");\n            this.props.setUserFilter([user_id]);\n          });\n        });\n\n        marker.addListener('click', ()=> {\n          this.infoWindows.forEach(i=>{i.close()});\n          infoWindow.open(this.map, marker);\n        });\n\n        this.markers.push(marker)\n        this.infoWindows.push(infoWindow);\n        latlngbounds.extend(firstEntry.cityLocation);\n      })\n\n      google.maps.event.addListener(this.map, \"click\", (e)=> {\n        this.infoWindows.forEach(i=>{i.close()});\n      });\n        \n      this.lines.forEach(l=>l.setMap(null));\n      this.lines = [];\n      \n      if(filterMode) {\n        \n        let paths = {};\n        \n        // gather path data\n        Object.keys(this.state.entries).forEach(k=>{      \n          this.state.entries[k].forEach(e=>{\n\n            if(!paths[e.user_id]) {\n              paths[e.user_id] = [];\n            }\n            paths[e.user_id].push({\n              location: e.cityLocation,\n              year: e.year\n            });\n          })\n        });\n\n        console.log(paths);\n\n        // sort entries by year and assemble polylines\n        Object.keys(paths).forEach(k=>{\n          let p = paths[k];\n          p.sort((a, b)=>{return b.year-a.year});\n          let locationPath = p.map(l=>{return {lat: l.location.lat, lng: l.location.lng}});\n          this.lines.push(\n            new google.maps.Polyline({\n              path: locationPath,\n              //geodesic: true,\n              strokeColor: '#aaa',\n              strokeOpacity: 1.0,\n              strokeWeight: 1\n            })\n          )\n        });\n\n        this.lines.forEach(l=>l.setMap(this.map));\n      }\n      \n      this.map.fitBounds(latlngbounds);\n      var zoom = this.map.getZoom();\n      this.map.setZoom(zoom < 2 ? 2 : zoom); // minimum initial zoom is 2, so there are no visible borders\n  \n  }\n\n  render() {\n    return (\n      <MapContainer ref={this.mapContainerRef} />\n    )\n  }\n}\n\nexport default MapComponent;\n\nconst glowColor1 = \"#444444\"; //\"#e60073\";\nconst glowColor2 = \"#404040\"; //\"#ff4da6\";\n\nconst glow = keyframes` \nfrom {\n  text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px ${glowColor1}, 0 0 40px ${glowColor1}, 0 0 50px ${glowColor1}, 0 0 60px ${glowColor1}, 0 0 70px ${glowColor1};\n}\nto {\n  text-shadow: 0 0 20px #fff, 0 0 30px ${glowColor2}, 0 0 40px ${glowColor2}, 0 0 50px ${glowColor2}, 0 0 60px ${glowColor2}, 0 0 70px ${glowColor2}, 0 0 80px ${glowColor2};\n}\n`\n\nconst MapContainer = styled.div`\n  width: 100%; \n  height: 100%;\n  visibility: ${props => props.visible != false ? \"visible\" : \"hidden\"};\n  * {\n   font-family: NeutraText;\n   line-height: 1.15;\n   font-size: 1rem;\n  }\n\n  .info-window {\n    /* content wrapper */\n\n    .info-window-entry {\n      /* entry wrapper */\n      &:not(:last-child) {\n        border-bottom: 1px dashed white;\n      }\n      padding-top: 0.25rem;\n    }\n\n    .info-window-musician {\n      padding-right: 0.25rem;\n    }    \n\n    .info-window-note {\n      /* user note */\n      display: block;\n      font-family: NeutraTextLightItalic;\n      font-size: 2rem;\n      line-height: 2rem;\n      word-break: break-all;\n      animation: ${glow} 1s ease-in-out infinite alternate;    \n    }\n\n    span.info-window-span {\n      /* biography link */\n      font-family: NeutraTextDemi;\n      display: block;\n      text-align: right;\n      pointer-events: all;\n      :hover { \n        cursor: pointer; \n        text-decoration: underline;\n      }\n    }\n  }\n\n  .gm-style .gm-style-iw-c {\n    /* popup window */\n    pointer-events: none;\n    max-width: 250px !important;\n    border-radius: 0;\n    overflow-x: hidden;\n    overflow-y: auto;\n    background-color: black;\n    color: white;\n    transform: translate(0%,-100%);\n    top: 1rem;\n    z-index: 10;\n\n    padding: 0.25rem 0.25rem 0.25rem 0.25rem !important;\n\n    &, *::after, *::before {\n      border: none;\n    }\n  }\n\n  .gm-style .gm-style-iw-t::after {\n    /* popup triangle */\n    /* background: linear-gradient(45deg,rgba(0,0,0,1) 50%,rgba(0,0,0,0,0) 51%,rgba(0,0,0,0,0) 100%); */\n    display: none;\n  }\n\n  .gm-style button {\n    /* popup close button */\n\n    display: none;\n\n    /*background-image: url(\"/images/closeWhite.png\") !important;\n    background-size: cover !important;\n    top: 0.25rem !important;\n    right: 0.25rem !important;\n    padding: 0.25rem !important;\n    width: 1rem !important;\n    height: 1rem !important;\n    opacity: 1;\n\n    img {\n      visibility: hidden;\n    }*/\n  }\n\n  .gm-style-iw-d {\n    overflow: hidden !important;\n  }\n\n`\n","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport { t, capitalize } from '../helpers'\n\nimport styled from 'styled-components'\n\nimport MapComponent from './MapComponent.js';\n\nclass ListPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        entries: []\n    }\n  }\n\n  async componentDidMount() {\n    window.location.hash = this.props.mcmmId;\n\n    axios.get(apiUrl + \"/entry_by_user/\" + this.props.mcmmId + \"/\")\n    .then((response)=> {\n      this.setState({ entries: response.data.docs})    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  render() {\n\n                \n    const entries = this.state.entries.map((e, i)=>\n      <ListItem key={i}>\n        <EditLink onClick={()=>{this.props.editEntry(e)}}>\n          {capitalize(e.musician)} {capitalize(e.city)} {e.year}\n        </EditLink>\n      </ListItem>);\n    return (\n      <Container>\n        <List>{entries}</List>\n\n        <p><NewEntryButton onClick={()=>this.props.navigate(\"edit\")}>{t(this.props.translations, \"new_entry\", this.props.locale)}</NewEntryButton></p>\n            \n\n        <p>{t(this.props.translations, \"edit_link_info_1\", this.props.locale)} <a href={\"#\"+this.props.mcmmId}>{\"#\"+this.props.mcmmId}</a></p>\n        <p>{t(this.props.translations, \"edit_link_info_2\", this.props.locale)}</p>\n      \n        <ShowMyEntriesButton onClick={()=>{this.props.setUserFilter([this.props.mcmmId])}}>\n          {t(this.props.translations, \"show_my_entries\", this.props.locale)}\n        </ShowMyEntriesButton>\n      </Container>\n    );\n  }\n}\n\nexport default ListPage;\n\nconst ShowMyEntriesButton = styled.div`\n  font-family: NeutraTextDemi;\n  margin-top: 1rem;\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`\n\nconst NewEntryButton = styled.div`\n  font-family: NeutraTextDemi;\n  margin-top: 1rem;\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`\n\nconst Container = styled.div`\n  padding: 1.25rem;\n`\n\nconst EditLink = styled.span`\n  :hover {\n    cursor: pointer;\n    text-decoration: underline;\n  };\n`\n\nconst List = styled.ul`\n  padding-left: 0px;\n  font-size: 1.25rem;\n  margin-bottom: 1.25rem;\n`\nconst ListItem = styled.li`\n  list-style: none;\n  margin-bottom: 0.3125rem;\n  border-bottom: 1px dashed black;\n  padding-bottom: 0.3125rem;\n\n`\n\nconst Dot = styled.span`\n  display: inline-block;\n  background-image: url(/images/dot.png);\n  width: 20px;\n  height: 20px;\n  background-repeat: no-repeat;\n  background-size: contain;\n  color: #fff;\n  font-size: 12px;\n  text-align: center;\n  line-height: 20px;\n`","import React, { PureComponent } from 'react';\nimport styled from 'styled-components';\n\nimport { apiUrl } from '../helpers'\nimport axios from 'axios';\nimport { makeMarkerSize } from '../helpers/index';\n\nexport default class LineGraph extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    }\n\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  fetchData() {\n\n    let params = {}\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    \n    axios.get(apiUrl + \"/year_data/\", {params})\n    .then((response)=> {\n      console.log(\"yearly data loaded\")\n      this.setState({\n        data: response.data\n      });\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter || this.props.userFilter !== prevProps.userFilter) {\n      this.fetchData();\n    }\n  }\n\n  renderYear(year, amount) {\n    return <li key={year}>\n      <span className=\"year_top\">\n        { amount > 0 ? \n          <img style={{transform: \"translateX(-50%) scale(\"+makeMarkerSize(amount)+\")\"}} alt={year} src=\"/images/marker.svg\" /> \n        : null }\n      </span>\n      <span className=\"year_middle\"></span>\n      <span className=\"year_bottom\">\n        <YearButton onClick={()=>{this.props.setYearFilter(year)}}>\n          { amount > 0 ? year : null }\n        </YearButton>  \n      </span>\n    </li>\n  }\n\n  render() {\n    let data = this.state.data\n    if (!data || data.length === 0) return null\n\n    // prepend some years at the beginning\n    const prependAmount = 4\n    data.unshift(...Array.from(Array(prependAmount), (e,i)=>({\n      year:i+(data[0].year-prependAmount), \n      amount:0\n    })))\n\n    // append some years at the end\n    const appendAmount = 1\n    data.push(...Array.from(Array(appendAmount), (e,i)=>({\n      year:i+(data[data.length-1].year + appendAmount), \n      amount:0\n    })))\n\n    const startYear = data[0].year\n        \n    const listEntries = data.map( d => this.renderYear(d.year, d.amount) )\n\n    return <Ol start={startYear}>\n        {listEntries}\n    </Ol>;\n  }\n}\n\nconst YearButton = styled.span`\n  :hover { \n    cursor: pointer \n    text-decoration: underline;\n  };\n`\n\nconst Ol = styled.ol`\n  position: fixed;\n  bottom:0;\n  left:0;\n  right: 0;\n  padding: 1rem;\n  box-sizing: border-box;\n  line-height: 1;\n\n  display: flex;\n  width: 100%;\n\n  li {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    height: 6em;\n  }\n\n  li .year_top {\n    height: 3vh;\n    /* background: red; */\n  }\n\n  li .year_top img {\n    left: 50%;\n    width: auto;\n    height: 1vh;\n    transform-origin: center 67%;\n    \n    /* background: yellow; */\n  }\n\n  li .year_middle {\n    height: 3vh;\n  }\n\n  li .year_middle:before {\n    content: \"\";\n    border: solid 1px black;\n    border-width: 0 0 0 1px;\n    position: relative;\n    left: calc(50% - 1px);\n  }\n\n  li .year_bottom {\n    height: 3vh;\n    /* background: green; */\n  }\n\n  li .year_bottom span {\n    width: calc(1em + 20%);\n    transform: rotate(-90deg) translateX(-100%);\n    overflow: visible;\n    /* background: red; */\n  }\n\n  li > * {\n    position: relative;\n  }\n\n  li > * > * {\n    position: absolute;\n  }\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport { capitalize } from '../helpers'\nimport styled from 'styled-components'\n\nclass TopMusiciansList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      musicians: []\n    }\n\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData() {\n    console.log(this.props);\n    let params = {}\n\n    if(this.props.musicianFilter) {\n      params.musician = this.props.musicianFilter;\n    }\n    if(this.props.userFilter && this.props.userFilter.length > 0) {\n      params.userIds = JSON.stringify(this.props.userFilter);\n    }\n    if(this.props.yearFilter) {\n      params.year = this.props.yearFilter;\n    }\n\n    axios.get(apiUrl + \"/top_musicians/10/\", {params})\n    .then((response)=> {\n      console.log(response.data);\n      this.setState({ musicians: response.data })    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }  \n\n  componentDidUpdate(prevProps) {\n    if(this.props.musicianFilter !== prevProps.musicianFilter || \n        this.props.userFilter !== prevProps.userFilter ||\n        this.props.yearFilter !== prevProps.yearFilter) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n\n    const entries = this.state.musicians\n      .sort((a, b) => (a.percent < b.percent) ? 1 : -1)\n      .map((e, i)=> \n        <li key={i} onClick={ () => this.props.setMusicianFilter(e.name) }>\n          <span>{e.percent}%</span>\n          <span>{capitalize(e.name)}&nbsp;({e.count})</span>\n        </li>)\n\n    return (\n      <Container filterOn={this.props.filterOn}>\n        <ul>{entries}</ul>\n      </Container>\n    );\n  }\n}\n\nexport default TopMusiciansList;\n\nconst Container = styled.div`\n  position: fixed;\n  right: 0;\n  top: ${props => props.filterOn ? \"60px\" : \"0\" };\n  width: auto;\n  padding: 1rem 1rem 0 0;\n  box-sizing: border-box;\n\n  ul {\n    list-style-type: none;\n  } ;\n  li {\n    display: flex;\n    span:first-child {\n      width: 2em;\n      margin-right: 0.75em;\n    }\n    span:last-child {\n      flex: 1;\n      &:hover {\n        cursor: pointer;\n        text-decoration: underline;\n      }\n    }\n  }\n`\n\nconst Clear = styled.span`\n  &:hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`","import React, { Component } from 'react';\nimport styled from 'styled-components'\n\nimport LineGraph from './LineGraph.js';\nimport MapComponent from './MapComponent.js';\nimport TopMusiciansList from './TopMusiciansList.js';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n  }\n  \n  render() {\n    const showFilterBar = (this.props.userFilter.length > 0 || this.props.musicianFilter || this.props.yearFilter)\n\n    return (\n      <Container>\n        <MapComponent \n          userFilter={this.props.userFilter} \n          setUserFilter={this.props.setUserFilter}\n          musicianFilter={this.props.musicianFilter}\n          yearFilter={this.props.yearFilter}\n          translations={this.props.translations}\n          locale={this.props.locale}\n        />\n        \n        { this.props.largeScreen &&\n          <TopMusiciansList \n            musicianFilter={this.props.musicianFilter}\n            userFilter={this.props.userFilter}\n            setMusicianFilter={this.props.setMusicianFilter}\n            yearFilter={this.props.yearFilter}\n            filterOn={showFilterBar}\n          />\n        }\n\n        { this.props.largeScreen && !this.props.yearFilter &&\n          <LineGraph \n            musicianFilter={this.props.musicianFilter}\n            yearFilter={this.props.yearFilter}\n            setYearFilter={this.props.setYearFilter}\n            userFilter={this.props.userFilter}\n          />\n        }\n        \n      </Container>\n    );\n  }\n}\n\nexport default HomePage;\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\nimport { t, capitalize } from '../helpers'\n\nimport ReactAutocomplete from 'react-autocomplete';\n\nimport styled from 'styled-components'\n\nclass EditPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      musician: this.props.entry ? this.props.entry.musician : \"\",\n      city: this.props.entry ? this.props.entry.city : \"\",\n      year: this.props.entry ? this.props.entry.year : \"\",\n      note: this.props.entry ? this.props.entry.note : \"\",\n      _id: this.props.entry ? this.props.entry._id : null,\n      musicians: [],\n      cities: [],\n      changed: false,\n      processing: false,\n    }\n  }\n\n  async componentDidMount() {\n    axios.get(apiUrl + \"/entry_uniques/\")\n    .then((response)=> {\n      console.log(response);\n      this.setState({musicians: response.data.musicians})    \n      this.setState({cities: response.data.cities})    \n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  handleSubmit = (event)=> {\n    console.log(this.state);\n    this.setState({processing: true});\n\n    if(!this.state._id) {\n      axios.post(apiUrl + '/entry', {\n        musician: this.state.musician, \n        city: this.state.city,\n        year: parseInt(this.state.year),\n        note: this.state.note,\n        user_id: this.props.mcmmId\n      })\n      .then((response)=> {\n        console.log(response);\n        this.setState({_id: response.data._id, changed: false, processing: false})\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n    \n    } else {\n\n      axios.put(apiUrl + '/entry/' + this.state._id, {\n        musician: this.state.musician, \n        city: this.state.city,\n        year: parseInt(this.state.year),\n        note: this.state.note,\n        user_id: this.props.mcmmId\n      })\n      .then((response)=> {\n        console.log(response);\n        this.setState({_id: response.data._id, changed: false, processing: false})\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n\n    }\n  }\n\n  handleDelete = () => {\n\n    if(window.confirm(\"really?\")) {\n        this.setState({processing: true});\n        axios.delete(apiUrl + '/entry/' + this.state._id, {        \n      })\n      .then((response)=> {\n        console.log(response);\n        this.props.back();\n      })\n      .catch((error)=> {\n        console.log(error);\n      });\n\n    }\n\n  }\n\n  handleInputChange = (event)=> {\n    const target = event.target;\n    const name = target.name;\n    const value = name !== \"year\" || (name === \"year\" && !isNaN(target.value)) ? target.value : this.state.year;\n\n    this.setState({\n      [name]: value,\n      changed: true\n    });\n  }\n\n  fixYear = year => {\n    const yearMax = new Date().getFullYear()\n    const yearMin = 1950\n    if ( year < yearMin && year !== \"\") year = yearMin\n    if ( year > yearMax) year = yearMax\n    return year\n  }\n\n  render() {\n    return (\n      <Container>\n        <Form>\n          <Label>{t(this.props.translations, \"musician_prompt\", this.props.locale)}</Label> \n          \n          <ReactAutocomplete\n            items={this.state.musicians.map((m)=>{return {value: m}})}\n            getItemValue={item => item.value}\n            shouldItemRender={(item, value) => item.value.toLowerCase().indexOf(value.toLowerCase()) > -1}\n            renderItem={(item, highlighted) =>\n              <div\n                key={item.value}\n                style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\n              >\n                {item.value}\n              </div>\n            }\n            value={capitalize(this.state.musician)}\n            onChange={(e) => this.setState({musician: e.target.value, changed: true})}\n            onSelect={(val) => this.setState({musician: val, changed: true})}\n            wrapperStyle={{display: \"block\"}}\n            inputProps={{style: autocompleteInputStyle}}\n          />\n\n          <br/>\n          <Label>{t(this.props.translations, \"city_prompt\", this.props.locale)}</Label> \n          \n          <ReactAutocomplete\n            items={this.state.cities.map((c)=>{return {value: c}})}\n            getItemValue={item => item.value}\n            shouldItemRender={(item, value) => item.value.toLowerCase().indexOf(value.toLowerCase()) > -1}\n            renderItem={(item, highlighted) =>\n              <div\n                key={item.value}\n                style={{ backgroundColor: highlighted ? '#eee' : 'transparent'}}\n              >\n                {item.value}\n              </div>\n            }\n            value={capitalize(this.state.city)}\n            onChange={(e) => this.setState({city: e.target.value, changed: true})}\n            onSelect={(val) => this.setState({city: val, changed: true})}\n            wrapperStyle={{display: \"block\", opacity: 1}}\n            inputProps={{style: autocompleteInputStyle}}\n          />\n\n          <br/>\n          <Label>{t(this.props.translations, \"year_prompt\", this.props.locale)}</Label>\n          <input \n            autoComplete=\"off\" \n            size=\"4\" \n            maxLength=\"4\" \n            type=\"text\" \n            name=\"year\" \n            value={this.state.year} \n            onChange={this.handleInputChange} \n            onBlur={() => this.setState({year:this.fixYear(this.state.year)})} \n          />\n          <br/>\n          <Label>{t(this.props.translations, \"note_prompt\", this.props.locale)}</Label>\n          <textarea name=\"note\" maxlength=\"200\" value={this.state.note} onChange={this.handleInputChange}/>\n          <br/>\n          {!this.state.processing ? <div>\n            {this.state.changed && <Button onClick={this.handleSubmit}>{t(this.props.translations, \"save_entry\", this.props.locale)}</Button>}\n            {this.state._id && <Button onClick={this.handleDelete}>{t(this.props.translations, \"delete_entry\", this.props.locale)}</Button>}\n            </div>\n          : <span>{t(this.props.translations, \"...\", this.props.locale)}</span>}\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default EditPage;\n\nconst Container = styled.div`\n  padding: 1.25rem;\n`\n\nconst Label = styled.label`\n  display: inline-block;\n  width: 200px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n`\n\nconst autocompleteInputStyle = {};\n\nconst Form = styled.form`\n  input, textarea {\n    display: block;\n    border:none;\n    width: 100%;\n    background-color: black;\n    color: white;\n    outline: none;\n    box-sizing: border-box;\n    padding: 0.5rem;\n  }\n\n  input {\n    font-size: 200%;\n    text-align: left;\n    height: 2em;\n    &[name=\"year\"] {\n      width: auto;\n    }\n  }\n\n  textarea {\n    height: 100px;\n    font-size: 150%;\n    font-family: NeutraTextLightItalic;\n  }\n\n  margin-bottom: 2rem;\n`\nconst Button = styled.div`\n  width: 100%;\n  margin-top: 20px;\n  :hover {cursor: pointer};\n  text-align: center;\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\n\nimport styled from 'styled-components'\n\nimport QrReader from 'react-qr-reader'\nvar QRCode = require('qrcode.react');\n\nclass ScanPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n        result: 'Scanning...'\n    }\n  }\n\n  componentDidMount() {\n    this.pollInterval = setInterval(()=>{this.props.pollFilter(this.props.mcmmId)}, 5000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.pollInterval);\n  }\n\n  handleScan = data => {\n    if (data) {\n      this.setState({\n        result: data\n      })\n\n      if (data.substring(0, 4) == \"pro_\") {\n        this.props.setUserFilter([this.props.mcmmId]);\n      } else {\n        this.props.setUserFilter([this.props.mcmmId, data]);\n      }\n\n      axios.get(apiUrl + \"/set_filter/\" + data + \"/\" + this.props.mcmmId)\n      .then((response)=> {\n        console.log(response);\n      })\n      .catch((e)=> {\n        console.log(e);\n      });\n    }\n  }\n  \n  handleError = err => {\n    console.error(err)\n  }\n\n  render() {\n                \n    return (\n      <Container>\n\n          <Qode>\n            <QRCode \n              value={this.props.mcmmId}\n              size={500}\n            />\n          </Qode>\n\n          <Scanner>\n            <QrReader\n              delay={300}\n              onError={this.handleError}\n              onScan={this.handleScan}\n            />\n            <p>{this.state.result}</p>\n          </Scanner>\n\n\n      </Container>\n    );\n  }\n}\n\nexport default ScanPage;\n\nconst menuHeight = \"4rem\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - ${menuHeight});\n  align-items: center;\n  background-color: black;\n`\n\nconst Qode = styled.div`\n  flex: 1;\n  max-width:calc(50vh - 0.5 * ${menuHeight});\n  width: 100vw;  \n  padding: 2.5rem;\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  background-color: white;\n  border: 1px solid black;\n\n  canvas {\n    width:100% !important;\n    height: auto !important;\n  }\n\n`\n\nconst Scanner = styled.div`\n  height: calc(((100vh - ${menuHeight}) / 100vh) * 100vw);\n  max-width:calc(50vh - 0.5 * ${menuHeight});\n  max-height:calc(50vh - 0.5 * ${menuHeight});\n  width: 100vw;\n  position: relative;\n  background-color: black;\n  border: 1px solid white;\n\n  > p {\n    position: absolute;\n    width: 100%;\n    color: white;\n    bottom: 0.5rem;\n    opacity: 0.5;\n    z-index: 10;\n    text-align: center;\n  }\n`","import React, { Component } from 'react';\n\nimport axios from 'axios';\nimport { apiUrl } from '../helpers'\nimport { t } from '../helpers'\n\nimport styled from 'styled-components'\n\nclass StaticPage extends Component {\n  constructor(props) {\n    super(props);\n      this.state = {\n    }\n  }\n\n  render() {\n                \n    return (\n      <StaticContainer>\n\n        <div \n          dangerouslySetInnerHTML={{__html: t(this.props.translations, this.props.pageKey + \"_content\", this.props.locale)}}\n        />\n\n      </StaticContainer>\n    );\n  }\n}\n\nexport default StaticPage;\n\nconst StaticContainer = styled.div`\n  padding: 1.25rem;\n`","import React, { Component } from 'react';\nimport \"css-reset-and-normalize\";\nimport { createGlobalStyle } from \"styled-components\";\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\nimport ReactResizeDetector from 'react-resize-detector';\n\nimport Menu from './Menu.js';\nimport ListPage from './ListPage.js';\nimport HomePage from './HomePage.js';\nimport EditPage from './EditPage.js';\nimport ScanPage from './ScanPage.js';\nimport StaticPage from './StaticPage.js';\nimport InfoBar from './InfoBar.js';\n\nimport axios from 'axios';\nimport { apiUrl, capitalize, t } from '../helpers'\n\nimport { isLargeScreen } from '../helpers/'\nimport styled from 'styled-components'\nconst uuidv1 = require('uuid/v1');\n\nclass BaseContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      examples: [],\n      menuOpen: false,\n      currentPage: \"home\",\n      mcmmId: null,\n      navStack: [],\n      userFilter: [],\n      musicianFilter: null,\n      yearFilter: null,\n      translations: [],\n      locale: \"de\",\n      projectionId: null\n    }\n\n    this.setUserFilter = this.setUserFilter.bind(this);\n    this.setMusicianFilter = this.setMusicianFilter.bind(this);\n    this.setYearFilter = this.setYearFilter.bind(this);\n    this.setLocale = this.setLocale.bind(this);\n    this.pollFilter = this.pollFilter.bind(this);\n    this.handleFilterClose = this.handleFilterClose.bind(this);\n\n  }\n\n  onResize = (width, height) => {\n    this.setState({\n      largeScreen: isLargeScreen(width, height),\n    })\n  }  \n\n  setLocale = (l)=> {\n    this.setState({locale: l})\n  }\n\n  setUserFilter(filter) {\n    this.setState({\n      userFilter: filter,\n      musicianFilter: null,\n      yearFilter: null\n    }, ()=>{\n      if(this.state.currentPage != \"home\") {\n        this.navigate(\"home\");  \n      }\n    });\n  }\n\n  setMusicianFilter(musician) {\n    this.setState({\n      musicianFilter: musician,\n      userFilter: [],\n      yearFilter: null\n    })\n  }\n\n  setYearFilter(year) {\n    this.setState({\n      musicianFilter: null,\n      userFilter: [],\n      yearFilter: year\n    })\n  }\n\n  pollFilter(id) {\n    axios.get(apiUrl + \"/filter?username=\" + id)\n    .then((response)=> {\n      console.log(response);\n      if(response.data && response.data.docs && response.data.docs.length) {\n        let ids = this.state.projectionId ? [] : [id];\n        response.data.docs[0].filter.forEach(filterId=>{ids.push(filterId)});\n        this.setUserFilter(ids);  \n      }\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n  }\n\n  handleFilterClose() {\n\n    console.log(\"handleFilterClose\");\n\n    axios.get(apiUrl + \"/remove_filter/\" + (this.state.projectionId ? this.state.projectionId : this.state.mcmmId))\n    .then((response)=> {\n      console.log(response);\n    })\n    .catch((e)=> {\n      console.log(e);\n    });\n\n    this.setUserFilter([]);\n    this.setMusicianFilter(null);\n    this.setYearFilter(null);\n  }\n\n\n  async componentDidMount() {\n\n    // setTimeout(()=>this.navigate(\"scan\"), 100  )\n\n    disableBodyScroll(document.querySelector('body'))\n\n    let queryParams = new URLSearchParams(window.location.search); \n    let projection_id = queryParams.get(\"projection_id\");\n    \n    if(projection_id) {\n\n      this.setState({\n        projectionId: projection_id\n      });\n\n      // start polling for filter\n      this.pollInterval = setInterval(()=>{this.pollFilter(projection_id)}, 5000);\n      \n    } else {\n\n      let hash = window.location.hash;\n      let mcmmId = localStorage.getItem('mcmmId');  \n      if(hash) {\n        mcmmId = hash.substr(1);\n        this.setState({\n          currentPage: \"list\",\n          mcmmId: mcmmId,\n          menuOpen: true,\n          navStack: [\"home\"]\n        })\n      }\n      if(!mcmmId) {\n        mcmmId = uuidv1();\n      }\n      this.setState({mcmmId: mcmmId});  \n      localStorage.setItem('mcmmId', mcmmId);    \n  \n    }\n  \n    let response = await axios.get(apiUrl + \"/translation\");\n    console.log(response);\n    this.setState({translations: response.data.docs});\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.pollInterval);\n  }\n\n  toggleMenu = ()=>{\n    if (this.state.menuOpen) {\n      if(this.state.currentPage == \"edit\") {\n        this.back();\n        return;\n      }\n\n      this.navigate(\"home\")\n    }\n    this.setState({menuOpen: !this.state.menuOpen})\n  }\n\n  navigate = (page, entry, noSave=false)=>{\n    if(!noSave) {\n      let navStack = this.state.navStack;\n      navStack.push(this.state.currentPage);\n      console.log(navStack);\n      this.setState({navStack});\n    }\n    this.setState({\n      menuOpen: page !== \"home\",\n      currentPage: page,\n      currentEntry: entry,\n      pageKey: entry\n    });\n    if(page != \"list\") {\n      let pathName = window.location.pathname + (this.state.projectionId ? \"?projection_id=\" + this.state.projectionId : \"\")\n      window.history.pushState(\"\", document.title, pathName);\n    }\n  }\n\n  reset = () => {\n    this.setUserFilter([]);\n    this.navigate(\"home\");\n  }\n\n  back = () => {\n    if(this.state.currentPage == \"scan\") {\n      this.navigate(\"home\");\n      return;\n    }\n\n    let navStack = this.state.navStack;\n    let previousPage = navStack.pop();\n    this.setState({navStack});\n    this.navigate(previousPage, this.state.entry, true);\n  }\n\n  render() {\n    const showFilterBar = (this.state.userFilter.length > 0 || this.state.musicianFilter || this.state.yearFilter)\n\n    const pages = {\n      \"home\": <HomePage mcmmId={this.state.mcmmId} \n        userFilter={this.state.userFilter} \n        setUserFilter={this.setUserFilter}\n        musicianFilter={this.state.musicianFilter}\n        setMusicianFilter={this.setMusicianFilter}\n        yearFilter={this.state.yearFilter}\n        setYearFilter={this.setYearFilter}\n        largeScreen={this.state.largeScreen}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        />,\n      \"list\": <ListPage \n        mcmmId={this.state.mcmmId} editEntry={(entry)=>{this.navigate(\"edit\", entry)}}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        setUserFilter={this.setUserFilter}\n        titleKey=\"my_entries\"\n        navigate={this.navigate}\n        />,\n      \"edit\": <EditPage \n        mcmmId={this.state.mcmmId} back={this.back} \n        entry={this.state.currentEntry}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        titleKey={this.state.currentEntry ? \"update entry\" : \"new entry\"}\n        />,\n      \"scan\": <ScanPage \n        mcmmId={this.state.mcmmId} setUserFilter={this.setUserFilter}\n        translations={this.state.translations}\n        locale={this.state.locale}\n        pollFilter={this.pollFilter}\n        titleKey=\"scanner\"\n      />,\n      \"page\": <StaticPage\n        translations={this.state.translations}\n        locale={this.state.locale}\n        pageKey={this.state.pageKey}\n        titleKey={this.state.pageKey + \"_heading\"}\n      />  \n    }\n    let mainContent = pages[\"home\"];\n\n    const page = this.state.currentPage !== \"home\" ? pages[this.state.currentPage] : null\n    \n    return (\n      [\n        <GlobalStyles key=\"globalstyles\" />,\n        <ReactResizeDetector key=\"resize\" handleWidth handleHeight onResize={this.onResize} />,\n        <Menu \n          menuOpen={this.state.menuOpen}\n          key=\"menu\" \n          close={this.toggleMenu} \n          navigate={this.navigate}\n          translations={this.state.translations}\n          locale={this.state.locale}\n          setLocale={this.setLocale}\n          reset={this.reset}\n          projectionMode={this.state.projectionId ? true : false}\n          render={page}\n        />, \n        <MainContent key=\"main\">\n          {!showFilterBar && \n            <MenuBar>\n              <MenuButton onClick={this.toggleMenu} src=\"images/menu.png\"/>\n              <MenuText>MATCH CUT</MenuText>\n            </MenuBar>\n          }\n          \n          {showFilterBar && \n            <InfoBar onClose={this.handleFilterClose}>\n              {(this.state.userFilter.length > 0) && <span>{t(this.state.translations, \"filter_for\", this.state.locale)} {this.state.userFilter.length} {t(this.state.translations, \"users\", this.state.locale)}</span>}\n              {(this.state.musicianFilter) && <span>{t(this.state.translations, \"filter_for\", this.state.locale)} {t(this.state.translations, \"users_that_named\", this.state.locale)} {capitalize(this.state.musicianFilter)}</span>}\n              {(this.state.yearFilter) && <span>{t(this.state.translations, \"filter_for\", this.state.locale)} {t(this.state.translations, \"entries_from_year\", this.state.locale)} {this.state.yearFilter}</span>}\n            </InfoBar>\n          }\n\n          {mainContent}\n          {(this.state.currentPage === \"home\" && !showFilterBar || this.state.currentPage == \"list\") && \n            <AddButton onClick={()=>this.navigate(\"edit\")} largeScreen={this.state.largeScreen}>\n              +\n            </AddButton>\n          }\n        </MainContent>\n      ]\n    );\n  }\n}\n\nexport default BaseContainer;\n\nconst MenuBar = styled.div`\n  position: fixed;\n  top:0;\n  z-index: 100;\n  display: flex;\n  padding: 1rem;\n`\n\nconst MenuText = styled.span`\n  font-size: 2.5rem;\n  padding-left: 1rem;\n  letter-spacing: 0.2ex;\n`\n\nconst MenuButton = styled.img`\n  width: auto;\n  height: calc(2 * 1.25rem); // scaling factor for the png image * font-size\n  &:hover {cursor: pointer}; \n`\n\nconst MainContent = styled.div`\n  height: 100%;\n  width: 100%;\n  background: #fff;\n`\n\nconst AddButton = styled.div`\n  position: fixed;\n  z-index: 100;\n  right: 1rem;\n  bottom: ${ props => (props.largeScreen ? \"9rem\" : \"2rem\") };\n  width: 2.5rem;\n  height: 2.5rem;\n  font-size: 2rem;\n  line-height: 1.1rem;\n  text-align: center;\n  border: 2px solid black;\n  border-radius: 50%;\n  background-color: white;\n  padding: 10px;\n  &:hover {cursor: pointer}; \n`\n\nconst GlobalStyles = createGlobalStyle`\n`","import React from 'react';\nimport BaseContainer from './components/BaseContainer.js'\n\nconst App = () => <BaseContainer/>\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}